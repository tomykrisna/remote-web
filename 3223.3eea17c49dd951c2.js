(self.webpackChunkyoutapPosReport=self.webpackChunkyoutapPosReport||[]).push([[3223],{3223:(U,I,a)=>{a.r(I),a.d(I,{AnalysisModule:()=>ft});var h=a(4887),f=a(4398),u=a(2920),g=a(3304),D=a(6e3),y=a(5617),E=a(5347),b=a(6687),t=a(7460),S=a(9275);let A=(()=>{class s extends E.u{constructor(o){super(),this.gaService=o,this.showButton=!1,this.filter="quantity"}onInjectInputs(o){this.title=o.title,this.showButton=o.closeButton,this.filter=o.data.filter}select(o){this.gaService.addEvent("quantity"===o?"klik_jumlah_terjual_analysis":"klik_jumlah_pendapatan_analysis","buka_pos",""),this.close(o)}cancel(){this.dismiss({})}static#t=this.\u0275fac=function(i){return new(i||s)(t.\u0275\u0275directiveInject(b.O))};static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:s,selectors:[["filter-modal-analysis"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:5,vars:10,consts:[[1,"flex","flex-col","gap-y-4","mt-4"],[1,"text-14px]","text-primary-yt-dark-blue"],[3,"outlined","title","borderColor","width","textColor","handleEmit"]],template:function(i,c){1&i&&(t.\u0275\u0275elementStart(0,"div",0)(1,"span",1),t.\u0275\u0275text(2,"Urutkan laporan berdasarkan"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"lib-basic-button",2),t.\u0275\u0275listener("handleEmit",function(){return c.select("quantity")}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"lib-basic-button",2),t.\u0275\u0275listener("handleEmit",function(){return c.select("price")}),t.\u0275\u0275elementEnd()()),2&i&&(t.\u0275\u0275advance(3),t.\u0275\u0275property("outlined","quantity"!==c.filter)("title","Jumlah Terjual")("borderColor","blue")("width","w-full")("textColor","quantity"===c.filter?"text-white":"text-primary-yt-blue"),t.\u0275\u0275advance(1),t.\u0275\u0275property("outlined","price"!==c.filter)("title","Jumlah Pendapatan")("borderColor","blue")("width","w-full")("textColor","price"===c.filter?"text-white":"text-primary-yt-blue"))},dependencies:[S.n],encapsulation:2})}return s})();var R=a(870),O=a(6698),_=a(5574),C=a(1001),$=a(8920),X=a(6890),J=a(3921),Q=a(6608),F=a(4260),V=a(6033),G=a(9523);function Z(s,x){if(1&s&&(t.\u0275\u0275elementStart(0,"div",23),t.\u0275\u0275element(1,"lib-analysis-product-card",24),t.\u0275\u0275elementEnd()),2&s){const o=x.$implicit,i=x.index;t.\u0275\u0275advance(1),t.\u0275\u0275property("index",i)("productImage",o.productImage)("productName",o.productName)("productType",o.categoryName)("productPrice",o.price)("productSell",o.quantity)("totalRevenue",o.subtotal)}}function H(s,x){if(1&s&&(t.\u0275\u0275elementStart(0,"div",18)(1,"div",19)(2,"span",20),t.\u0275\u0275text(3,"Update Terakhir "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"span",21),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"formatDate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(7,Z,2,7,"div",22),t.\u0275\u0275elementEnd()),2&s){const o=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind2(6,2,o.latestTransactionDate,"DD MMM YYYY, HH:mm")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",o.productAnalytics)}}function q(s,x){if(1&s){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-basic-button",27),t.\u0275\u0275listener("handleEmit",function(){t.\u0275\u0275restoreView(o);const c=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(c.handleLoadMoreDate())}),t.\u0275\u0275elementEnd()}2&s&&t.\u0275\u0275property("title","Muat Lebih Banyak")("width","!w-full")}function tt(s,x){if(1&s&&(t.\u0275\u0275elementStart(0,"div",25),t.\u0275\u0275template(1,q,1,2,"lib-basic-button",26),t.\u0275\u0275elementEnd()),2&s){const o=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.loadMore&&!o.loading)}}function et(s,x){if(1&s){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-basic-empty-state",28),t.\u0275\u0275listener("clickButton",function(){t.\u0275\u0275restoreView(o);const c=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(c.goToPOS())}),t.\u0275\u0275elementEnd()}2&s&&t.\u0275\u0275property("showButton",!0)("buttonLabel","Buka Youtap POS")}function nt(s,x){if(1&s){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-basic-empty-state",29),t.\u0275\u0275listener("clickButton",function(){t.\u0275\u0275restoreView(o);const c=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(c.verifyAccount())}),t.\u0275\u0275elementEnd()}2&s&&t.\u0275\u0275property("showButton",!0)("buttonLabel","Verifikasi Akun")}function ot(s,x){1&s&&(t.\u0275\u0275elementStart(0,"div",30),t.\u0275\u0275element(1,"p-skeleton",31)(2,"p-skeleton",31)(3,"p-skeleton",31),t.\u0275\u0275elementEnd())}function it(s,x){if(1&s){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",32)(1,"span"),t.\u0275\u0275text(2,"Download"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"i",33),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const c=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(c.showDownloadReport=!c.showDownloadReport)}),t.\u0275\u0275elementEnd()()}}function lt(s,x){if(1&s){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",34)(1,"lib-basic-button",35),t.\u0275\u0275listener("handleEmit",function(){t.\u0275\u0275restoreView(o);const c=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(c.downloadByDateModal())}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"lib-basic-button",35),t.\u0275\u0275listener("handleEmit",function(){t.\u0275\u0275restoreView(o);const c=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(c.showMonthModal())}),t.\u0275\u0275elementEnd()()}2&s&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("title","Laporan Tanggal Terpilih")("borderColor","blue")("width","w-full")("textColor","text-white"),t.\u0275\u0275advance(1),t.\u0275\u0275property("title","Mutasi Bulanan")("borderColor","blue")("width","w-full")("textColor","text-white"))}function at(s,x){if(1&s){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",32)(1,"span"),t.\u0275\u0275text(2,"Download"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"i",33),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const c=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(c.isShowModal=!1)}),t.\u0275\u0275elementEnd()()}}function K(s,x){if(1&s){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"lib-basic-button",39),t.\u0275\u0275listener("handleEmit",function(){const v=t.\u0275\u0275restoreView(o).$implicit,M=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(M.downloadModal(v))}),t.\u0275\u0275elementEnd()()}if(2&s){const o=x.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("title",o.month)("bColor","!bg-blue")("borderColor","blue")("width","w-full")("textColor","text-white")}}function j(s,x){if(1&s&&(t.\u0275\u0275elementStart(0,"p",36),t.\u0275\u0275text(1," Pilih salah satu bulan yang ingin dimutasi"),t.\u0275\u0275element(2,"br"),t.\u0275\u0275elementStart(3,"span",21),t.\u0275\u0275text(4,"(Hanya dapat mengunduh 1 file dalam 1 hari)"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"div",37),t.\u0275\u0275template(6,K,2,5,"div",38),t.\u0275\u0275elementEnd()),2&s){const o=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(6),t.\u0275\u0275property("ngForOf",o.arrMonth)}}function st(s,x){if(1&s){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"div",2),t.\u0275\u0275elementStart(2,"div",3)(3,"div",4)(4,"div",5)(5,"lib-date-range-input",6),t.\u0275\u0275listener("ngModelChange",function(c){t.\u0275\u0275restoreView(o);const v=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(v.dateRange=c)})("ngModelChange",function(c){t.\u0275\u0275restoreView(o);const v=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(v.setChangeDate(c))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"img",7),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(c.filterSort())}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"img",8),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(c.showDownloadReport=!c.showDownloadReport)}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(8,H,8,5,"div",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(9,tt,2,1,"div",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(10,et,1,2,"lib-basic-empty-state",11)(11,nt,1,2,"lib-basic-empty-state",12)(12,ot,4,0,"div",13),t.\u0275\u0275elementStart(13,"lib-bottom-modal",14),t.\u0275\u0275listener("closeOutsideModal",function(){t.\u0275\u0275restoreView(o);const c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(c.showDownloadReport=!c.showDownloadReport)}),t.\u0275\u0275template(14,it,4,0,"ng-template",null,15,t.\u0275\u0275templateRefExtractor)(16,lt,3,8,"ng-template",null,16,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"lib-bottom-modal",17),t.\u0275\u0275template(19,at,4,0,"ng-template",null,15,t.\u0275\u0275templateRefExtractor)(21,j,7,1,"ng-template",null,16,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()()}if(2&s){const o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275property("ngModel",o.dateRange)("minDate",o.minDate)("maxDate",o.maxDate),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",o.productAnalytics.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.loadMore&&o.listProductAnalytics.listProductAnalytics.data.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!o.loading&&o.isVerified&&!o.productAnalytics.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!o.loading&&!o.isVerified&&!o.productAnalytics.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("showModal",o.showDownloadReport),t.\u0275\u0275advance(5),t.\u0275\u0275property("showModal",o.isShowModal)}}const Y=[{path:"",component:(()=>{class s{constructor(o,i,c,v,M,W,ht,L,mt,gt){this.activatedRoute=o,this.router=i,this.transactionService=c,this.modalService=v,this.authData=M,this.http=W,this.deeplinkService=ht,this.downloadService=L,this.gaService=mt,this.libsDownloadFileService=gt,this.start="",this.loading=!1,this.loadingDownload=!1,this.filter="quantity",this.productAnalytics=[],this.page=1,this.startDate=g().format("YYYY-MM-DD"),this.endDate=g().format("YYYY-MM-DD"),this.minDate=g().subtract(1,"month").toDate(),this.maxDate=new Date,this.loadMore=!1,this.dateRange=[new Date,new Date],this.isShowModal=!1,this.showDownloadReport=!1,this.toastMessage="",this.showToast=!1,this.start=this.activatedRoute.snapshot?.queryParamMap.get("start")||""}ngOnInit(){this.start&&(this.startDate=this.start),this.getDetailProfile(),this.getListProductAnalytics()}getDetailProfile(){this.authData.user&&(this.isVerified=this.authData.user.merchant.accountType===u.tO8.premium)}setChangeDate(o){o[0]&&o[1]&&(this.page=1,this.productAnalytics=[],this.startDate=g(o[0]).format("YYYY-MM-DD"),this.endDate=g(o[1]).format("YYYY-MM-DD"),this.getListProductAnalytics())}handleLoadMoreDate(){this.loading=!1,this.page=this.page+1,this.getListProductAnalytics()}getListProductAnalytics(){this.loading=!0,this.loadMore=!0,this.transactionService.listProductAnalytics({listProductAnalyticsInput:{page:this.page,perPage:10,orderBy:"quantity"===this.filter?u.KpW.QUANTITY:u.KpW.PRICE,startDate:this.startDate,endDate:this.endDate,merchantId:""}}).subscribe({next:({data:i})=>{this.loading=!1,this.listProductAnalytics=i,i.listProductAnalytics.data.forEach(c=>{this.productAnalytics.push(c)}),this.page===i.listProductAnalytics.totalPage&&(this.loadMore=!1)},error:()=>{this.loading=!1}})}downloadByDateModal(){this.isShowModal=!1,this.modalService.open(y.T,{title:"Download",closeButton:!0}).onResult().subscribe(i=>{switch(i){case"csv":this.downloadProductAnalysisByDate("csv");break;case"excel":this.downloadProductAnalysisByDate("excel")}})}downloadProductAnalysisByDate(o){this.loadingDownload=!0;let i=new D.HttpParams;i=i.set("startDate",this.startDate),i=i.set("endDate",this.endDate),i=i.set("fileType",o),i=i.set("orderBy","quantity"===this.filter?"quantity":"price");const c=new D.HttpHeaders({Authorization:`Bearer ${this.authData.token}`});this.downloadService.downloadAnalysisFile(c,i,`Laporan Analisis Produk ${this.startDate} - ${this.endDate}`).subscribe(v=>{const M=new Blob([v],{type:v.type});this.libsDownloadFileService.saveToFile(`Laporan Analisis Produk ${this.startDate}-${this.endDate}`,M)},v=>{console.error("Error downloading the file",v)})}downloadFileProductAnalysis(o,i){this.loadingDownload=!0;let c=new D.HttpParams;i&&(c=c.set("yyyymm",i.year+(i.stringMonth??"01"))),o&&(c=c.set("fileType",o));const v=new D.HttpHeaders({Authorization:`Bearer ${this.authData.token}`});this.downloadService.downloadAnalysisFile(v,c,`Laporan Analisis Produk bulan ${i.month} ${i.year}`).subscribe(M=>{const W=new Blob([M],{type:M.type});this.libsDownloadFileService.saveToFile(`Laporan Analisis Produk bulan ${i.month} ${i.year}`,W)},M=>{console.error("Error downloading the file",M)})}showToasts(o){this.toastMessage=o,this.showToast=!0,setTimeout(()=>{this.showToast=!1},2e3)}goToPOS(){this.gaService.addEvent("buka_pos_product_analysis","buka_pos",""),this.deeplinkService.toAppPos()}verifyAccount(){this.router.navigate(["/register/login-kyc"])}downloadModal(o){this.isShowModal=!1,this.modalService.open(y.T,{title:"Download",closeButton:!0}).onResult().subscribe(c=>{switch(c){case"csv":this.downloadFileProductAnalysis("csv",o);break;case"excel":this.downloadFileProductAnalysis("excel",o)}})}filterSort(){this.modalService.open(A,{title:"Filter",closeButton:!0,data:{filter:this.filter}}).onResult().subscribe(i=>{this.page=1,this.filter=i,this.productAnalytics=[],this.getListProductAnalytics()},i=>i)}getTransactionUpdatedAt(){this.transactionService.transactionUpdatedAt().subscribe({next:({data:o})=>{o.transactionUpdatedAt.date&&(this.latestTransactionDate=o.transactionUpdatedAt.date)},error:()=>{}})}showMonthModal(){const o=[];for(let i=1;i<=3;i++)o.push({month:g().subtract(i,"month").format("MMMM"),indexMonth:g().subtract(i,"month").toDate().getMonth(),stringMonth:g().subtract(i,"month").format("MM"),year:g().subtract(i,"month").format("YYYY")});this.arrMonth=o,this.showDownloadReport=!this.showDownloadReport,this.isShowModal=!0}static#t=this.\u0275fac=function(i){return new(i||s)(t.\u0275\u0275directiveInject(f.ActivatedRoute),t.\u0275\u0275directiveInject(f.Router),t.\u0275\u0275directiveInject(u.pXi),t.\u0275\u0275directiveInject(O.Z),t.\u0275\u0275directiveInject(R.x),t.\u0275\u0275directiveInject(D.HttpClient),t.\u0275\u0275directiveInject(_._),t.\u0275\u0275directiveInject(C.K),t.\u0275\u0275directiveInject(b.O),t.\u0275\u0275directiveInject(u.Sbs))};static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:s,selectors:[["product-analysis"]],decls:2,vars:1,consts:[["id","list-product-analysis",1,"flex","flex-col","my-[3%]","overflow-y-scroll","scrollbar-hide","h-full","bg-neutral-grey-6"],[4,"ngIf"],[1,"spacer","h-[14px]","bg-neutral-grey-6"],[1,"bg-white"],[1,"flex","flex-col","p-[16px]","gap-y-3"],[1,"flex","flex-row","gap-x-4"],["placeholder","Pilih tanggal laporan",1,"w-full",3,"ngModel","minDate","maxDate","ngModelChange"],["src","./assets/images/png/button-filter-2.png","alt","filter-button","width","43px",1,"cursor-pointer","!h-[43px]",3,"click"],["src","./assets/images/png/button-download.png","alt","download-button","width","43px",1,"cursor-pointer","!h-[43px]",3,"click"],["class","flex flex-col gap-y-4",4,"ngIf"],["class","flex flex-col px-[16px]",4,"ngIf"],["image","./assets/images/png/empty-transaction-subscription.png","label","Wah.. tidak ada transaksi ditanggal ini, yuks pilih tanggal yang lain..","description","Ayo, Lakukan transaksi sekarang dari Youtap POS!",3,"showButton","buttonLabel","clickButton",4,"ngIf"],["image","./assets/images/png/sending-otp.png","label","Kamu belum melakukan verifikasi!","description","Lakukan verifikasi dan buat transaksi melalui Youtap POS sekarang.",3,"showButton","buttonLabel","clickButton",4,"ngIf"],["class","flex flex-col p-[16px] gap-y-3 bg-white",4,"ngIf"],[3,"showModal","closeOutsideModal"],["headerTemplate",""],["bodyTemplate",""],[3,"showModal"],[1,"flex","flex-col","gap-y-4"],[1,"text-[10px]"],[1,"text-grey-4"],[1,"text-grey-3"],["class","flex flex-col",4,"ngFor","ngForOf"],[1,"flex","flex-col"],[3,"index","productImage","productName","productType","productPrice","productSell","totalRevenue"],[1,"flex","flex-col","px-[16px]"],[3,"title","width","handleEmit",4,"ngIf"],[3,"title","width","handleEmit"],["image","./assets/images/png/empty-transaction-subscription.png","label","Wah.. tidak ada transaksi ditanggal ini, yuks pilih tanggal yang lain..","description","Ayo, Lakukan transaksi sekarang dari Youtap POS!",3,"showButton","buttonLabel","clickButton"],["image","./assets/images/png/sending-otp.png","label","Kamu belum melakukan verifikasi!","description","Lakukan verifikasi dan buat transaksi melalui Youtap POS sekarang.",3,"showButton","buttonLabel","clickButton"],[1,"flex","flex-col","p-[16px]","gap-y-3","bg-white"],["width","100%","height","7rem"],[1,"flex","flex-row","justify-between","items-center","z-10","relative","h-[5vh]"],[1,"pi","pi-times",3,"click"],[1,"flex","flex-col","gap-y-2","mt-3","max-h-[50vh]","overflow-y-scroll","scrollbar-hide"],[3,"title","borderColor","width","textColor","handleEmit"],[1,"text-[14px]","text-primary-yt-dark-blue","bg-blue-"],[1,"flex","flex-col","gap-y-2","mt-3"],[4,"ngFor","ngForOf"],[3,"title","bColor","borderColor","width","textColor","handleEmit"]],template:function(i,c){1&i&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,st,23,10,"div",1),t.\u0275\u0275elementEnd()),2&i&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",c.listProductAnalytics))},dependencies:[h.NgForOf,h.NgIf,$.V,S.n,X.S,J.n,Q.S,F.O,V.NgControlStatus,V.NgModel,G.i],encapsulation:2})}return s})(),title:"Analisis-Produk",data:{pageTitle:"Analisis Produk"}}];let rt=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:s});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[f.RouterModule.forChild(Y),f.RouterModule]})}return s})();var N=a(1482);let ct=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:s});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[h.CommonModule,u.dTQ,u.hJ1,V.FormsModule,u.$QN,u.FFv,N.Rq,u.Pl,F.m,u.PPX,u.gPf,u.drE,u.zkK]})}return s})();var z=a(3985),dt=a(1685),ut=a(2168),pt=a(5695);let ft=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:s});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({providers:[dt._M,D.HttpClient,u.pXi,{provide:"BASE_URL_BOS_API",useClass:ut.G,useValue:pt.environment.BOS_API_URL}],imports:[h.CommonModule,rt,u.dTQ,ct,u.hJ1,u.PPX,u.gPf,u.zkK,u.drE,F.m,V.FormsModule,D.HttpClientModule,z.p]})}return s})()},5617:(U,I,a)=>{a.d(I,{T:()=>D});var h=a(5347),f=a(7460),g=a(9275);let D=(()=>{class y extends h.u{constructor(){super(...arguments),this.showModal=!1}onInjectInputs(b){this.title=b.title,this.showModal=b.closeButton}select(b){this.close(b)}cancel(){this.dismiss({})}static#t=this.\u0275fac=(()=>{let b;return function(S){return(b||(b=f.\u0275\u0275getInheritedFactory(y)))(S||y)}})();static#e=this.\u0275cmp=f.\u0275\u0275defineComponent({type:y,selectors:[["download-modal-analysis"]],features:[f.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[1,"flex","flex-col","gap-y-4","mt-4"],[3,"title","width","handleEmit"]],template:function(t,S){1&t&&(f.\u0275\u0275elementStart(0,"div",0)(1,"lib-basic-button",1),f.\u0275\u0275listener("handleEmit",function(){return S.select("excel")}),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(2,"lib-basic-button",1),f.\u0275\u0275listener("handleEmit",function(){return S.select("csv")}),f.\u0275\u0275elementEnd()()),2&t&&(f.\u0275\u0275advance(1),f.\u0275\u0275property("title","Excel File")("width","w-full"),f.\u0275\u0275advance(1),f.\u0275\u0275property("title","CSV File")("width","w-full"))},dependencies:[g.n],encapsulation:2})}return y})()},1001:(U,I,a)=>{a.d(I,{K:()=>y});var h=a(6e3),u=a(5695),g=a(7460);let y=(()=>{class E{constructor(t){this.httpClient=t}downloadFile(t){return this.httpClient.get(u.environment.POS_API_URL+"/product-imports/template",{responseType:"blob"})}downloadAnalysisFile(t,S,A){return this.httpClient.get(u.environment.POS_API_URL+"/product-analytics/generate-report",{params:S,headers:t,responseType:"blob"})}static#t=this.\u0275fac=function(S){return new(S||E)(g.\u0275\u0275inject(h.HttpClient))};static#e=this.\u0275prov=g.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})()},9397:(U,I,a)=>{a.d(I,{b:()=>D});var h=a(4674),f=a(9360),u=a(8251),g=a(2737);function D(y,E,b){const t=(0,h.m)(y)||E||b?{next:y,error:E,complete:b}:y;return t?(0,f.e)((S,A)=>{var R;null===(R=t.subscribe)||void 0===R||R.call(t);let O=!0;S.subscribe((0,u.x)(A,_=>{var C;null===(C=t.next)||void 0===C||C.call(t,_),A.next(_)},()=>{var _;O=!1,null===(_=t.complete)||void 0===_||_.call(t),A.complete()},_=>{var C;O=!1,null===(C=t.error)||void 0===C||C.call(t,_),A.error(_)},()=>{var _,C;O&&(null===(_=t.unsubscribe)||void 0===_||_.call(t)),null===(C=t.finalize)||void 0===C||C.call(t)}))}):g.y}},1482:(U,I,a)=>{a.d(I,{Ry:()=>gt,Rq:()=>St});var h=a(7460),f=a(2096),u=a(2438),g=a(1631),D=a(7398),y=a(9397),E=a(2181),b=a(1954);const S=new(a(9931).v)(b.o),A=S;var R=a(9360),O=a(8251),_=a(4829),$=a(5592),X=a(671);function F(e,n=S,l){const r=function Q(e=0,n,l=A){let r=-1;return null!=n&&((0,X.K)(n)?l=n:r=n),new $.y(d=>{let p=function J(e){return e instanceof Date&&!isNaN(e)}(e)?+e-l.now():e;p<0&&(p=0);let m=0;return l.schedule(function(){d.closed||(d.next(m++),0<=r?this.schedule(void 0,r):d.complete())},p)})}(e,n);return function C(e,n){return(0,R.e)((l,r)=>{const{leading:d=!0,trailing:p=!1}=n??{};let m=!1,T=null,w=null,P=!1;const k=()=>{w?.unsubscribe(),w=null,p&&(wt(),P&&r.complete())},vt=()=>{w=null,P&&r.complete()},_t=B=>w=(0,_.Xf)(e(B)).subscribe((0,O.x)(r,k,vt)),wt=()=>{if(m){m=!1;const B=T;T=null,r.next(B),!P&&_t(B)}};l.subscribe((0,O.x)(r,B=>{m=!0,T=B,(!w||w.closed)&&(d?wt():_t(B))},()=>{P=!0,(!(p&&m&&w)||w.closed)&&r.complete()}))})}(()=>r,l)}function G(e,n,l,r){const d=window&&!!window.document&&window.document.documentElement;let p=d&&n?window:l;if(e&&(p=e&&d&&"string"==typeof e?function Z(e,n,l){return(l?window.document:n).querySelector(e)}(e,l.nativeElement,r):e,!p))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return p}function H(e){return e&&!e.firstChange}const tt={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},et={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class nt{constructor(n=!0){this.vertical=n,this.propsMap=n?tt:et}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function at(e){return["Window","global"].some(l=>Object.prototype.toString.call(e).includes(l))}function K(e,n){return e?n.document.documentElement:null}function j(e,n){const l=function rt({container:e,isWindow:n,axis:l}){const{offsetHeightKey:r,clientHeightKey:d}=Y(l);return N(e,n,r,d)}(n);return n.isWindow?function st(e,n,l){const{axis:r,container:d,isWindow:p}=l,{offsetHeightKey:m,clientHeightKey:T}=Y(r),w=e+z(K(p,d),r,p),P=N(n.nativeElement,p,m,T),k=function ct(e,n,l){const r=n.topKey();if(e.getBoundingClientRect)return e.getBoundingClientRect()[r]+z(e,n,l)}(n.nativeElement,r,p)+P;return{height:e,scrolled:w,totalToScroll:k,isWindow:p}}(l,e,n):function yt(e,n,l){const{axis:r,container:d}=l;return{height:e,scrolled:d[r.scrollTopKey()],totalToScroll:d[r.scrollHeightKey()],isWindow:!1}}(l,0,n)}function Y(e){return{offsetHeightKey:e.offsetHeightKey(),clientHeightKey:e.clientHeightKey()}}function N(e,n,l,r){if(isNaN(e[l])){const d=K(n,e);return d?d[r]:0}return e[l]}function z(e,n,l){const r=n.pageYOffsetKey(),d=n.scrollTopKey(),p=n.offsetTopKey();return isNaN(window.pageYOffset)?K(l,e)[d]:e.ownerDocument?e.ownerDocument.defaultView[r]:e[p]}function dt(e,n={down:0,up:0},l){let r,d;if(e.totalToScroll<=0)return!1;const p=e.isWindow?e.scrolled:e.height+e.scrolled;return l?(r=(e.totalToScroll-p)/e.totalToScroll,d=(n?.down?n.down:0)/10):(r=e.scrolled/(e.scrolled+(e.totalToScroll-p)),d=(n?.up?n.up:0)/10),r<=d}class v{constructor({totalToScroll:n}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=n}updateScrollPosition(n){return this.lastScrollPosition=n}updateTotalToScroll(n){this.lastTotalToScroll!==n&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=n)}updateScroll(n,l){this.updateScrollPosition(n),this.updateTotalToScroll(l)}updateTriggeredFlag(n,l){l?this.triggered.down=n:this.triggered.up=n}isTriggeredScroll(n,l){return l?this.triggered.down===n:this.triggered.up===n}}const L={DOWN:"[NGX_ISE] DOWN",UP:"[NGX_ISE] UP"};function mt(e){const{scrollDown:n,stats:{scrolled:l}}=e;return{type:n?L.DOWN:L.UP,payload:{currentScrollPosition:l}}}let gt=(()=>{class e{constructor(l,r){this.element=l,this.zone=r,this.scrolled=new h.EventEmitter,this.scrolledUp=new h.EventEmitter,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:l,infiniteScrollDisabled:r,infiniteScrollDistance:d}){const p=H(l),m=H(r),T=H(d),w=!m&&!this.infiniteScrollDisabled||m&&!r.currentValue||T;(p||m||T)&&(this.destroyScroller(),w&&this.setup())}setup(){(function q(){return typeof window<"u"})()&&this.zone.runOutsideAngular(()=>{this.disposeScroller=function M(e){const{scrollContainer:n,scrollWindow:l,element:r,fromRoot:d}=e,p=function it({windowElement:e,axis:n}){return function lt(e,n){const l=e.isWindow||n&&!n.nativeElement?n:n.nativeElement;return{...e,container:l}}({axis:n,isWindow:at(e)},e)}({axis:new nt(!e.horizontal),windowElement:G(n,l,r,d)}),m=new v({totalToScroll:j(r,p)}),w={up:e.upDistance,down:e.downDistance};return function W(e){let n=(0,u.R)(e.container,"scroll");return e.throttle&&(n=n.pipe(F(e.throttle,void 0,{leading:!0,trailing:!0}))),n}({container:p.container,throttle:e.throttle}).pipe((0,g.z)(()=>(0,f.of)(j(r,p))),(0,D.U)(P=>function ht(e,n,l){const{scrollDown:r,fire:d}=function pt(e,n,l){const r=function ut(e,n){return e<n.scrolled}(e,n);return{fire:dt(n,l,r),scrollDown:r}}(e,n,l);return{scrollDown:r,fire:d,stats:n}}(m.lastScrollPosition,P,w)),(0,y.b)(({stats:P})=>m.updateScroll(P.scrolled,P.totalToScroll)),(0,E.h)(({fire:P,scrollDown:k,stats:{totalToScroll:vt}})=>function ot(e,n,l){return!!(e&&n||!l&&n)}(e.alwaysCallback,P,m.isTriggeredScroll(vt,k))),(0,y.b)(({scrollDown:P,stats:{totalToScroll:k}})=>{m.updateTriggeredFlag(k,P)}),(0,D.U)(mt))}({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(l=>this.handleOnScroll(l))})}handleOnScroll({type:l,payload:r}){const d=l===L.DOWN?this.scrolled:this.scrolledUp;(function bt(e){return e.observed??e.observers.length>0})(d)&&this.zone.run(()=>d.emit(r))}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}return e.\u0275fac=function(l){return new(l||e)(h.\u0275\u0275directiveInject(h.ElementRef),h.\u0275\u0275directiveInject(h.NgZone))},e.\u0275dir=h.\u0275\u0275defineDirective({type:e,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[h.\u0275\u0275NgOnChangesFeature]}),e})(),St=(()=>{class e{}return e.\u0275fac=function(l){return new(l||e)},e.\u0275mod=h.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=h.\u0275\u0275defineInjector({}),e})()}}]);