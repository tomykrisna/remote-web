(self.webpackChunkyoutapPosReport=self.webpackChunkyoutapPosReport||[]).push([[3223],{3223:(X,P,i)=>{i.r(P),i.d(P,{AnalysisModule:()=>mt});var g=i(4887),f=i(4398),p=i(2575),_=i(3304),y=i(5695),h=i(6e3),k=i(6457),x=i(5347),t=i(7460),E=i(9275);let M=(()=>{class a extends x.u{constructor(){super(...arguments),this.showButton=!1,this.filter="quantity"}onInjectInputs(o){this.title=o.title,this.showButton=o.closeButton,this.filter=o.data.filter}select(o){this.close(o)}cancel(){this.dismiss({})}static#t=this.\u0275fac=(()=>{let o;return function(s){return(o||(o=t.\u0275\u0275getInheritedFactory(a)))(s||a)}})();static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["filter-modal-analysis"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:5,vars:10,consts:[[1,"flex","flex-col","gap-y-4","mt-4"],[1,"text-14px]","text-primary-yt-dark-blue"],[3,"outlined","title","borderColor","width","textColor","handleEmit"]],template:function(r,s){1&r&&(t.\u0275\u0275elementStart(0,"div",0)(1,"span",1),t.\u0275\u0275text(2,"Urutkan laporan berdasarkan"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"lib-basic-button",2),t.\u0275\u0275listener("handleEmit",function(){return s.select("quantity")}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"lib-basic-button",2),t.\u0275\u0275listener("handleEmit",function(){return s.select("price")}),t.\u0275\u0275elementEnd()()),2&r&&(t.\u0275\u0275advance(3),t.\u0275\u0275property("outlined","quantity"!==s.filter)("title","Jumlah Terjual")("borderColor","blue")("width","w-full")("textColor","quantity"===s.filter?"text-white":"text-primary-yt-blue"),t.\u0275\u0275advance(1),t.\u0275\u0275property("outlined","price"!==s.filter)("title","Jumlah Pendapatan")("borderColor","blue")("width","w-full")("textColor","price"===s.filter?"text-white":"text-primary-yt-blue"))},dependencies:[E.n],encapsulation:2})}return a})();var U=i(870),B=i(6698),b=i(5574),d=i(6687),I=i(8920),A=i(6890),F=i(3921),H=i(6608),Y=i(4260),O=i(6033),W=i(9523);function j(a,S){if(1&a&&(t.\u0275\u0275elementStart(0,"div",23),t.\u0275\u0275element(1,"lib-analysis-product-card",24),t.\u0275\u0275elementEnd()),2&a){const o=S.$implicit,r=S.index;t.\u0275\u0275advance(1),t.\u0275\u0275property("index",r)("productImage",o.productImage)("productName",o.productName)("productType",o.categoryName)("productPrice",o.price)("productSell",o.quantity)("totalRevenue",o.subtotal)}}function J(a,S){if(1&a&&(t.\u0275\u0275elementStart(0,"div",18)(1,"div",19)(2,"span",20),t.\u0275\u0275text(3,"Update Terakhir "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"span",21),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"formatDate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(7,j,2,7,"div",22),t.\u0275\u0275elementEnd()),2&a){const o=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind2(6,2,o.latestTransactionDate,"DD MMM YYYY, HH:mm")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",o.productAnalytics)}}function et(a,S){if(1&a){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-basic-button",27),t.\u0275\u0275listener("handleEmit",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(s.handleLoadMoreDate())}),t.\u0275\u0275elementEnd()}2&a&&t.\u0275\u0275property("title","Muat Lebih Banyak")("width","!w-full")}function nt(a,S){if(1&a&&(t.\u0275\u0275elementStart(0,"div",25),t.\u0275\u0275template(1,et,1,2,"lib-basic-button",26),t.\u0275\u0275elementEnd()),2&a){const o=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.loadMore&&!o.loading)}}function ot(a,S){if(1&a){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-basic-empty-state",28),t.\u0275\u0275listener("clickButton",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.goToPOS())}),t.\u0275\u0275elementEnd()}2&a&&t.\u0275\u0275property("showButton",!0)("buttonLabel","Buka Youtap POS")}function it(a,S){if(1&a){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-basic-empty-state",29),t.\u0275\u0275listener("clickButton",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.verifyAccount())}),t.\u0275\u0275elementEnd()}2&a&&t.\u0275\u0275property("showButton",!0)("buttonLabel","Verifikasi Akun")}function lt(a,S){1&a&&(t.\u0275\u0275elementStart(0,"div",30),t.\u0275\u0275element(1,"p-skeleton",31)(2,"p-skeleton",31)(3,"p-skeleton",31),t.\u0275\u0275elementEnd())}function at(a,S){if(1&a){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",32)(1,"span"),t.\u0275\u0275text(2,"Download"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"i",33),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.showDownloadReport=!s.showDownloadReport)}),t.\u0275\u0275elementEnd()()}}function rt(a,S){if(1&a){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",34)(1,"lib-basic-button",35),t.\u0275\u0275listener("handleEmit",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.downloadByDateModal())}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"lib-basic-button",35),t.\u0275\u0275listener("handleEmit",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.showMonthModal())}),t.\u0275\u0275elementEnd()()}2&a&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("title","Laporan Tanggal Terpilih")("borderColor","blue")("width","w-full")("textColor","text-white"),t.\u0275\u0275advance(1),t.\u0275\u0275property("title","Mutasi Bulanan")("borderColor","blue")("width","w-full")("textColor","text-white"))}function st(a,S){if(1&a){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",32)(1,"span"),t.\u0275\u0275text(2,"Download"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"i",33),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.isShowModal=!1)}),t.\u0275\u0275elementEnd()()}}function Q(a,S){if(1&a){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"lib-basic-button",39),t.\u0275\u0275listener("handleEmit",function(){const w=t.\u0275\u0275restoreView(o).$implicit,L=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(L.downloadModal(w))}),t.\u0275\u0275elementEnd()()}if(2&a){const o=S.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("title",o.month)("bColor","!bg-blue")("borderColor","blue")("width","w-full")("textColor","text-white")}}function G(a,S){if(1&a&&(t.\u0275\u0275elementStart(0,"p",36),t.\u0275\u0275text(1," Pilih salah satu bulan yang ingin dimutasi"),t.\u0275\u0275element(2,"br"),t.\u0275\u0275elementStart(3,"span",21),t.\u0275\u0275text(4,"(Hanya dapat mengunduh 1 file dalam 1 hari)"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"div",37),t.\u0275\u0275template(6,Q,2,5,"div",38),t.\u0275\u0275elementEnd()),2&a){const o=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(6),t.\u0275\u0275property("ngForOf",o.arrMonth)}}function ct(a,S){if(1&a){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"div",2),t.\u0275\u0275elementStart(2,"div",3)(3,"div",4)(4,"div",5)(5,"lib-date-range-input",6),t.\u0275\u0275listener("ngModelChange",function(s){t.\u0275\u0275restoreView(o);const w=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(w.dateRange=s)})("ngModelChange",function(s){t.\u0275\u0275restoreView(o);const w=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(w.setChangeDate(s))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"img",7),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.filterSort())}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"img",8),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.showDownloadReport=!s.showDownloadReport)}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(8,J,8,5,"div",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(9,nt,2,1,"div",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(10,ot,1,2,"lib-basic-empty-state",11)(11,it,1,2,"lib-basic-empty-state",12)(12,lt,4,0,"div",13),t.\u0275\u0275elementStart(13,"lib-bottom-modal",14),t.\u0275\u0275listener("closeOutsideModal",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.showDownloadReport=!s.showDownloadReport)}),t.\u0275\u0275template(14,at,4,0,"ng-template",null,15,t.\u0275\u0275templateRefExtractor)(16,rt,3,8,"ng-template",null,16,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"lib-bottom-modal",17),t.\u0275\u0275template(19,st,4,0,"ng-template",null,15,t.\u0275\u0275templateRefExtractor)(21,G,7,1,"ng-template",null,16,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()()}if(2&a){const o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275property("ngModel",o.dateRange)("minDate",o.minDate)("maxDate",o.maxDate),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",o.productAnalytics.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.loadMore&&o.listProductAnalytics.listProductAnalytics.data.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!o.loading&&o.isVerified&&!o.productAnalytics.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!o.loading&&!o.isVerified&&!o.productAnalytics.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("showModal",o.showDownloadReport),t.\u0275\u0275advance(5),t.\u0275\u0275property("showModal",o.isShowModal)}}const Z=[{path:"",component:(()=>{class a{constructor(o,r,s,w,L,K,N,R){this.activatedRoute=o,this.router=r,this.transactionService=s,this.modalService=w,this.authData=L,this.http=K,this.deeplinkService=N,this.gaService=R,this.start="",this.loading=!1,this.loadingDownload=!1,this.filter="quantity",this.productAnalytics=[],this.page=1,this.startDate=_().format("YYYY-MM-DD"),this.endDate=_().format("YYYY-MM-DD"),this.minDate=_().subtract(1,"month").toDate(),this.maxDate=new Date,this.loadMore=!1,this.dateRange=[new Date,new Date],this.isShowModal=!1,this.showDownloadReport=!1,this.start=this.activatedRoute.snapshot?.queryParamMap.get("start")||""}ngOnInit(){this.start&&(this.startDate=this.start),this.getDetailProfile(),this.getListProductAnalytics()}getDetailProfile(){this.authData.user&&(this.isVerified=this.authData.user.merchant.accountType===p.tO8.premium)}setChangeDate(o){o[0]&&o[1]&&(this.page=1,this.productAnalytics=[],this.startDate=_(o[0]).format("YYYY-MM-DD"),this.endDate=_(o[1]).format("YYYY-MM-DD"),this.getListProductAnalytics())}handleLoadMoreDate(){this.loading=!1,this.page=this.page+1,this.getListProductAnalytics()}getListProductAnalytics(){this.loading=!0,this.loadMore=!0,this.transactionService.listProductAnalytics({listProductAnalyticsInput:{page:this.page,perPage:10,orderBy:"quantity"===this.filter?p.KpW.QUANTITY:p.KpW.PRICE,startDate:this.startDate,endDate:this.endDate,merchantId:""}}).subscribe({next:({data:r})=>{this.loading=!1,this.listProductAnalytics=r,r.listProductAnalytics.data.forEach(s=>{this.productAnalytics.push(s)}),this.page===r.listProductAnalytics.totalPage&&(this.loadMore=!1)},error:()=>{this.loading=!1}})}downloadByDateModal(){this.isShowModal=!1,this.modalService.open(k.T,{title:"Download",closeButton:!0}).onResult().subscribe(r=>{switch(r){case"csv":this.downloadProductAnalysisByDate("csv");break;case"excel":this.downloadProductAnalysisByDate("excel")}})}downloadProductAnalysisByDate(o){const r=y.environment.POS_API_URL+"/product-analytics/generate-report";this.loadingDownload=!0;let s=new h.HttpParams;s=s.set("startDate",this.startDate),s=s.set("endDate",this.endDate),s=s.set("fileType",o),s=s.set("orderBy","quantity"===this.filter?"quantity":"price");const w=new h.HttpHeaders({Authorization:`Bearer ${this.authData.token}`});this.http.get(r,{headers:w,params:s,responseType:"blob"}).subscribe(L=>{const K=new Blob([L],{type:L.type}),N=window.URL.createObjectURL(K),R=document.createElement("a");R.href=N,R.download=`Laporan Analisis Produk ${this.startDate} - ${this.endDate}`,document.body.appendChild(R),R.click(),document.body.removeChild(R),this.showDownloadReport=!1})}downloadFileProductAnalysis(o,r){const s=y.environment.POS_API_URL+"/product-analytics/generate-report";this.loadingDownload=!0;let w=new h.HttpParams;r&&(w=w.set("yyyymm",r.year+r.stringMonth)),o&&(w=w.set("fileType",o));const L=new h.HttpHeaders({Authorization:`Bearer ${this.authData.token}`});this.http.get(s,{headers:L,params:w,responseType:"blob"}).subscribe(K=>{const N=new Blob([K],{type:K.type}),R=window.URL.createObjectURL(N),V=document.createElement("a");V.href=R,V.download=`Laporan Analisis Produk bulan ${r.month} ${r.year}`,document.body.appendChild(V),V.click(),document.body.removeChild(V)})}goToPOS(){this.gaService.addEvent("buka_pos_product_analysis","buka_pos",""),this.deeplinkService.toAppPos()}verifyAccount(){this.router.navigate(["/register/login-kyc"])}downloadModal(o){this.isShowModal=!1,this.modalService.open(k.T,{title:"Download",closeButton:!0}).onResult().subscribe(s=>{switch(s){case"csv":this.downloadFileProductAnalysis("csv",o);break;case"excel":this.downloadFileProductAnalysis("excel",o)}})}filterSort(){this.modalService.open(M,{title:"Filter",closeButton:!0,data:{filter:this.filter}}).onResult().subscribe(r=>{this.page=1,this.filter=r,this.productAnalytics=[],this.getListProductAnalytics()},r=>r)}getTransactionUpdatedAt(){this.transactionService.transactionUpdatedAt().subscribe({next:({data:o})=>{o.transactionUpdatedAt.date&&(this.latestTransactionDate=o.transactionUpdatedAt.date)},error:()=>{}})}showMonthModal(){const o=[];for(let r=1;r<=3;r++)o.push({month:_().subtract(r,"month").format("MMMM"),indexMonth:_().subtract(r,"month").toDate().getMonth(),stringMonth:_().subtract(r,"month").format("MM"),year:_().subtract(r,"month").format("YYYY")});this.arrMonth=o,this.showDownloadReport=!this.showDownloadReport,this.isShowModal=!0}static#t=this.\u0275fac=function(r){return new(r||a)(t.\u0275\u0275directiveInject(f.ActivatedRoute),t.\u0275\u0275directiveInject(f.Router),t.\u0275\u0275directiveInject(p.pXi),t.\u0275\u0275directiveInject(B.Z),t.\u0275\u0275directiveInject(U.x),t.\u0275\u0275directiveInject(h.HttpClient),t.\u0275\u0275directiveInject(b._),t.\u0275\u0275directiveInject(d.O))};static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["product-analysis"]],decls:2,vars:1,consts:[["id","list-product-analysis",1,"flex","flex-col","my-[3%]","overflow-y-scroll","scrollbar-hide","h-full","bg-neutral-grey-6"],[4,"ngIf"],[1,"spacer","h-[14px]","bg-neutral-grey-6"],[1,"bg-white"],[1,"flex","flex-col","p-[16px]","gap-y-3"],[1,"flex","flex-row","gap-x-4"],["placeholder","Pilih tanggal laporan",1,"w-full",3,"ngModel","minDate","maxDate","ngModelChange"],["src","./assets/images/png/button-filter-2.png","alt","filter-button","width","43px",1,"cursor-pointer","!h-[43px]",3,"click"],["src","./assets/images/png/button-download.png","alt","download-button","width","43px",1,"cursor-pointer","!h-[43px]",3,"click"],["class","flex flex-col gap-y-4",4,"ngIf"],["class","flex flex-col px-[16px]",4,"ngIf"],["image","./assets/images/png/empty-transaction-subscription.png","label","Wah.. tidak ada transaksi ditanggal ini, yuks pilih tanggal yang lain..","description","Ayo, Lakukan transaksi sekarang dari Youtap POS!",3,"showButton","buttonLabel","clickButton",4,"ngIf"],["image","./assets/images/png/sending-otp.png","label","Kamu belum melakukan verifikasi!","description","Lakukan verifikasi dan buat transaksi melalui Youtap POS sekarang.",3,"showButton","buttonLabel","clickButton",4,"ngIf"],["class","flex flex-col p-[16px] gap-y-3 bg-white",4,"ngIf"],[3,"showModal","closeOutsideModal"],["headerTemplate",""],["bodyTemplate",""],[3,"showModal"],[1,"flex","flex-col","gap-y-4"],[1,"text-[10px]"],[1,"text-grey-4"],[1,"text-grey-3"],["class","flex flex-col",4,"ngFor","ngForOf"],[1,"flex","flex-col"],[3,"index","productImage","productName","productType","productPrice","productSell","totalRevenue"],[1,"flex","flex-col","px-[16px]"],[3,"title","width","handleEmit",4,"ngIf"],[3,"title","width","handleEmit"],["image","./assets/images/png/empty-transaction-subscription.png","label","Wah.. tidak ada transaksi ditanggal ini, yuks pilih tanggal yang lain..","description","Ayo, Lakukan transaksi sekarang dari Youtap POS!",3,"showButton","buttonLabel","clickButton"],["image","./assets/images/png/sending-otp.png","label","Kamu belum melakukan verifikasi!","description","Lakukan verifikasi dan buat transaksi melalui Youtap POS sekarang.",3,"showButton","buttonLabel","clickButton"],[1,"flex","flex-col","p-[16px]","gap-y-3","bg-white"],["width","100%","height","7rem"],[1,"flex","flex-row","justify-between","items-center","z-10","relative","h-[5vh]"],[1,"pi","pi-times",3,"click"],[1,"flex","flex-col","gap-y-2","mt-3","max-h-[50vh]","overflow-y-scroll","scrollbar-hide"],[3,"title","borderColor","width","textColor","handleEmit"],[1,"text-[14px]","text-primary-yt-dark-blue","bg-blue-"],[1,"flex","flex-col","gap-y-2","mt-3"],[4,"ngFor","ngForOf"],[3,"title","bColor","borderColor","width","textColor","handleEmit"]],template:function(r,s){1&r&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,ct,23,10,"div",1),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",s.listProductAnalytics))},dependencies:[g.NgForOf,g.NgIf,I.V,E.n,A.S,F.n,H.S,Y.O,O.NgControlStatus,O.NgModel,W.i],encapsulation:2})}return a})(),title:"Analisis-Produk",data:{pageTitle:"Analisis Produk"}}];let dt=(()=>{class a{static#t=this.\u0275fac=function(r){return new(r||a)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:a});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[f.RouterModule.forChild(Z),f.RouterModule]})}return a})();var q=i(1482);let ut=(()=>{class a{static#t=this.\u0275fac=function(r){return new(r||a)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:a});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[g.CommonModule,p.dTQ,p.hJ1,O.FormsModule,p.$QN,p.FFv,q.Rq,p.Pl,Y.m,p.PPX,p.gPf,p.drE,p.zkK]})}return a})();var tt=i(3985),pt=i(1685),ft=i(2168);let mt=(()=>{class a{static#t=this.\u0275fac=function(r){return new(r||a)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:a});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({providers:[pt._M,h.HttpClient,p.pXi,{provide:"BASE_URL_BOS_API",useClass:ft.G,useValue:y.environment.BOS_API_URL}],imports:[g.CommonModule,dt,p.dTQ,ut,p.hJ1,p.PPX,p.gPf,p.zkK,p.drE,Y.m,O.FormsModule,h.HttpClientModule,tt.p]})}return a})()},6457:(X,P,i)=>{i.d(P,{T:()=>y});var g=i(5347),f=i(7460),_=i(9275);let y=(()=>{class h extends g.u{constructor(){super(...arguments),this.showModal=!1}onInjectInputs(x){this.title=x.title,this.showModal=x.closeButton}select(x){this.close(x)}cancel(){this.dismiss({})}static#t=this.\u0275fac=(()=>{let x;return function(E){return(x||(x=f.\u0275\u0275getInheritedFactory(h)))(E||h)}})();static#e=this.\u0275cmp=f.\u0275\u0275defineComponent({type:h,selectors:[["download-modal-analysis"]],features:[f.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[1,"flex","flex-col","gap-y-4","mt-4"],[3,"title","width","handleEmit"]],template:function(t,E){1&t&&(f.\u0275\u0275elementStart(0,"div",0)(1,"lib-basic-button",1),f.\u0275\u0275listener("handleEmit",function(){return E.select("excel")}),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(2,"lib-basic-button",1),f.\u0275\u0275listener("handleEmit",function(){return E.select("csv")}),f.\u0275\u0275elementEnd()()),2&t&&(f.\u0275\u0275advance(1),f.\u0275\u0275property("title","Excel File")("width","w-full"),f.\u0275\u0275advance(1),f.\u0275\u0275property("title","CSV File")("width","w-full"))},dependencies:[_.n],encapsulation:2})}return h})()},2438:(X,P,i)=>{i.d(P,{R:()=>E});var g=i(4829),f=i(5592),p=i(1631),_=i(4266),y=i(4674),h=i(7400);const k=["addListener","removeListener"],x=["addEventListener","removeEventListener"],t=["on","off"];function E(d,I,A,F){if((0,y.m)(A)&&(F=A,A=void 0),F)return E(d,I,A).pipe((0,h.Z)(F));const[H,Y]=function b(d){return(0,y.m)(d.addEventListener)&&(0,y.m)(d.removeEventListener)}(d)?x.map(O=>W=>d[O](I,W,A)):function U(d){return(0,y.m)(d.addListener)&&(0,y.m)(d.removeListener)}(d)?k.map(M(d,I)):function B(d){return(0,y.m)(d.on)&&(0,y.m)(d.off)}(d)?t.map(M(d,I)):[];if(!H&&(0,_.z)(d))return(0,p.z)(O=>E(O,I,A))((0,g.Xf)(d));if(!H)throw new TypeError("Invalid event target");return new f.y(O=>{const W=(...j)=>O.next(1<j.length?j:j[0]);return H(W),()=>Y(W)})}function M(d,I){return A=>F=>d[A](I,F)}},2096:(X,P,i)=>{i.d(P,{of:()=>p});var g=i(9940),f=i(9666);function p(..._){const y=(0,g.yG)(_);return(0,f.D)(_,y)}},9397:(X,P,i)=>{i.d(P,{b:()=>y});var g=i(4674),f=i(9360),p=i(8251),_=i(2737);function y(h,k,x){const t=(0,g.m)(h)||k||x?{next:h,error:k,complete:x}:h;return t?(0,f.e)((E,M)=>{var U;null===(U=t.subscribe)||void 0===U||U.call(t);let B=!0;E.subscribe((0,p.x)(M,b=>{var d;null===(d=t.next)||void 0===d||d.call(t,b),M.next(b)},()=>{var b;B=!1,null===(b=t.complete)||void 0===b||b.call(t),M.complete()},b=>{var d;B=!1,null===(d=t.error)||void 0===d||d.call(t,b),M.error(b)},()=>{var b,d;B&&(null===(b=t.unsubscribe)||void 0===b||b.call(t)),null===(d=t.finalize)||void 0===d||d.call(t)}))}):_.y}},7400:(X,P,i)=>{i.d(P,{Z:()=>_});var g=i(7398);const{isArray:f}=Array;function _(y){return(0,g.U)(h=>function p(y,h){return f(h)?y(...h):y(h)}(y,h))}},1482:(X,P,i)=>{i.d(P,{Ry:()=>bt,Rq:()=>xt});var g=i(7460),f=i(2096),p=i(2438),_=i(1631),y=i(7398),h=i(9397),k=i(2181),x=i(1954);const E=new(i(9931).v)(x.o),M=E;var U=i(9360),B=i(8251),b=i(4829),I=i(5592),A=i(671);function Y(e,n=E,l){const c=function H(e=0,n,l=M){let c=-1;return null!=n&&((0,A.K)(n)?l=n:c=n),new I.y(u=>{let m=function F(e){return e instanceof Date&&!isNaN(e)}(e)?+e-l.now():e;m<0&&(m=0);let v=0;return l.schedule(function(){u.closed||(u.next(v++),0<=c?this.schedule(void 0,c):u.complete())},m)})}(e,n);return function d(e,n){return(0,U.e)((l,c)=>{const{leading:u=!0,trailing:m=!1}=n??{};let v=!1,T=null,D=null,C=!1;const z=()=>{D?.unsubscribe(),D=null,m&&(_t(),C&&c.complete())},ht=()=>{D=null,C&&c.complete()},yt=$=>D=(0,b.Xf)(e($)).subscribe((0,B.x)(c,z,ht)),_t=()=>{if(v){v=!1;const $=T;T=null,c.next($),!C&&yt($)}};l.subscribe((0,B.x)(c,$=>{v=!0,T=$,(!D||D.closed)&&(u?_t():yt($))},()=>{C=!0,(!(m&&v&&D)||D.closed)&&c.complete()}))})}(()=>c,l)}function W(e,n,l,c){const u=window&&!!window.document&&window.document.documentElement;let m=u&&n?window:l;if(e&&(m=e&&u&&"string"==typeof e?function j(e,n,l){return(l?window.document:n).querySelector(e)}(e,l.nativeElement,c):e,!m))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return m}function J(e){return e&&!e.firstChange}const nt={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},ot={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class it{constructor(n=!0){this.vertical=n,this.propsMap=n?nt:ot}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function st(e){return["Window","global"].some(l=>Object.prototype.toString.call(e).includes(l))}function Q(e,n){return e?n.document.documentElement:null}function G(e,n){const l=function dt({container:e,isWindow:n,axis:l}){const{offsetHeightKey:c,clientHeightKey:u}=Z(l);return q(e,n,c,u)}(n);return n.isWindow?function ct(e,n,l){const{axis:c,container:u,isWindow:m}=l,{offsetHeightKey:v,clientHeightKey:T}=Z(c),D=e+tt(Q(m,u),c,m),C=q(n.nativeElement,m,v,T),z=function ut(e,n,l){const c=n.topKey();if(e.getBoundingClientRect)return e.getBoundingClientRect()[c]+tt(e,n,l)}(n.nativeElement,c,m)+C;return{height:e,scrolled:D,totalToScroll:z,isWindow:m}}(l,e,n):function gt(e,n,l){const{axis:c,container:u}=l;return{height:e,scrolled:u[c.scrollTopKey()],totalToScroll:u[c.scrollHeightKey()],isWindow:!1}}(l,0,n)}function Z(e){return{offsetHeightKey:e.offsetHeightKey(),clientHeightKey:e.clientHeightKey()}}function q(e,n,l,c){if(isNaN(e[l])){const u=Q(n,e);return u?u[c]:0}return e[l]}function tt(e,n,l){const c=n.pageYOffsetKey(),u=n.scrollTopKey(),m=n.offsetTopKey();return isNaN(window.pageYOffset)?Q(l,e)[u]:e.ownerDocument?e.ownerDocument.defaultView[c]:e[m]}function pt(e,n={down:0,up:0},l){let c,u;if(e.totalToScroll<=0)return!1;const m=e.isWindow?e.scrolled:e.height+e.scrolled;return l?(c=(e.totalToScroll-m)/e.totalToScroll,u=(n?.down?n.down:0)/10):(c=e.scrolled/(e.scrolled+(e.totalToScroll-m)),u=(n?.up?n.up:0)/10),c<=u}class L{constructor({totalToScroll:n}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=n}updateScrollPosition(n){return this.lastScrollPosition=n}updateTotalToScroll(n){this.lastTotalToScroll!==n&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=n)}updateScroll(n,l){this.updateScrollPosition(n),this.updateTotalToScroll(l)}updateTriggeredFlag(n,l){l?this.triggered.down=n:this.triggered.up=n}isTriggeredScroll(n,l){return l?this.triggered.down===n:this.triggered.up===n}}const V={DOWN:"[NGX_ISE] DOWN",UP:"[NGX_ISE] UP"};function vt(e){const{scrollDown:n,stats:{scrolled:l}}=e;return{type:n?V.DOWN:V.UP,payload:{currentScrollPosition:l}}}let bt=(()=>{class e{constructor(l,c){this.element=l,this.zone=c,this.scrolled=new g.EventEmitter,this.scrolledUp=new g.EventEmitter,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:l,infiniteScrollDisabled:c,infiniteScrollDistance:u}){const m=J(l),v=J(c),T=J(u),D=!v&&!this.infiniteScrollDisabled||v&&!c.currentValue||T;(m||v||T)&&(this.destroyScroller(),D&&this.setup())}setup(){(function et(){return typeof window<"u"})()&&this.zone.runOutsideAngular(()=>{this.disposeScroller=function K(e){const{scrollContainer:n,scrollWindow:l,element:c,fromRoot:u}=e,m=function at({windowElement:e,axis:n}){return function rt(e,n){const l=e.isWindow||n&&!n.nativeElement?n:n.nativeElement;return{...e,container:l}}({axis:n,isWindow:st(e)},e)}({axis:new it(!e.horizontal),windowElement:W(n,l,c,u)}),v=new L({totalToScroll:G(c,m)}),D={up:e.upDistance,down:e.downDistance};return function N(e){let n=(0,p.R)(e.container,"scroll");return e.throttle&&(n=n.pipe(Y(e.throttle,void 0,{leading:!0,trailing:!0}))),n}({container:m.container,throttle:e.throttle}).pipe((0,_.z)(()=>(0,f.of)(G(c,m))),(0,y.U)(C=>function R(e,n,l){const{scrollDown:c,fire:u}=function mt(e,n,l){const c=function ft(e,n){return e<n.scrolled}(e,n);return{fire:pt(n,l,c),scrollDown:c}}(e,n,l);return{scrollDown:c,fire:u,stats:n}}(v.lastScrollPosition,C,D)),(0,h.b)(({stats:C})=>v.updateScroll(C.scrolled,C.totalToScroll)),(0,k.h)(({fire:C,scrollDown:z,stats:{totalToScroll:ht}})=>function lt(e,n,l){return!!(e&&n||!l&&n)}(e.alwaysCallback,C,v.isTriggeredScroll(ht,z))),(0,h.b)(({scrollDown:C,stats:{totalToScroll:z}})=>{v.updateTriggeredFlag(z,C)}),(0,y.U)(vt))}({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(l=>this.handleOnScroll(l))})}handleOnScroll({type:l,payload:c}){const u=l===V.DOWN?this.scrolled:this.scrolledUp;(function wt(e){return e.observed??e.observers.length>0})(u)&&this.zone.run(()=>u.emit(c))}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}return e.\u0275fac=function(l){return new(l||e)(g.\u0275\u0275directiveInject(g.ElementRef),g.\u0275\u0275directiveInject(g.NgZone))},e.\u0275dir=g.\u0275\u0275defineDirective({type:e,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[g.\u0275\u0275NgOnChangesFeature]}),e})(),xt=(()=>{class e{}return e.\u0275fac=function(l){return new(l||e)},e.\u0275mod=g.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=g.\u0275\u0275defineInjector({}),e})()}}]);