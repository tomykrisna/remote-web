(self.webpackChunkyoutapBos=self.webpackChunkyoutapBos||[]).push([[11],{37011:(F,C,r)=>{r.r(C),r.d(C,{InboxModule:()=>Z});var p=r(54887),w=r(44398),u=r(93433),t=r(17460),h=r(9275),P=r(96608),T=r(56890),D=r(25879),g=r(6593),U=r(9523);function x(o,S){if(1&o&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(i.shortDescription)}}function _(o,S){if(1&o&&t.\u0275\u0275element(0,"span",13),2&o){const i=t.\u0275\u0275nextContext();t.\u0275\u0275property("innerHtml",i.content,t.\u0275\u0275sanitizeHtml)}}function E(o,S){if(1&o){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"span",14),t.\u0275\u0275listener("click",function(a){t.\u0275\u0275restoreView(i);const A=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(A.setToggleReadMore(a))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",i.seeMore?"See Less":"Read More"," ")}}function f(o,S){if(1&o){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"img",15),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.setRedirect())}),t.\u0275\u0275elementEnd()}if(2&o){const i=t.\u0275\u0275nextContext();t.\u0275\u0275property("src",i.image,t.\u0275\u0275sanitizeUrl)}}let s=(()=>{class o{constructor(i,d,a){this.router=i,this.sanitizer=d,this.gaService=a,this.isRead=!0,this.seeMore=!1,this.readInboxId=new t.EventEmitter}ngOnInit(){switch(this.content=this.sanitizer.bypassSecurityTrustHtml(this.description),this.category){case u.T47.ALL:this.categoryName="Semua";break;case u.T47.CAMPAIGN:this.categoryName="Campaign";break;case u.T47.REMINDER:this.categoryName="Reminder";break;case u.T47.PROMO:this.categoryName="Promo";break;case u.T47.INFO:this.categoryName="Info"}}setToggleReadMore(i){i.stopPropagation(),this.seeMore=!this.seeMore,this.setReadInbox()}setReadInbox(){this.isRead||(this.isRead=!0,this.readInboxId.emit(this.id))}setRedirect(){if(this.gaService.addEvent("inbox detail "+this.broadcastName,"banner",""),this.setReadInbox(),this.link){let i;switch(this.type){case u.Ppq.INTERNAL:i=this.link.split(window.location.protocol+"//"+window.location.host),2===i.length?this.router.navigate([i[1]]).then():window.open(this.link,"_blank");break;case u.Ppq.EXTERNAL:window.open(this.link,"_blank")}}}static#t=this.\u0275fac=function(d){return new(d||o)(t.\u0275\u0275directiveInject(w.Router),t.\u0275\u0275directiveInject(g.H7),t.\u0275\u0275directiveInject(D.O))};static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["inbox-card"]],inputs:{category:"category",title:"title",description:"description",date:"date",image:"image",isRead:"isRead",shortDescription:"shortDescription",id:"id",type:"type",link:"link",broadcastName:"broadcastName"},outputs:{readInboxId:"readInboxId"},decls:18,vars:14,consts:[[3,"click"],[1,"flex","flex-row","mt-4","border-b-[1px]","border-grey-5","pb-1"],[1,"mr-[10px]"],["src","/assets/images/svg/info-blue.svg","width","24px","height","24px","alt","info-icon",1,""],[1,"flex-row","w-full"],[1,"flex","flex-row","justify-between"],[1,"text-grey-3","text-[12px]"],[1,"text-[14px]","text-xl"],[1,"text-[14px]"],[4,"ngIf"],[3,"innerHtml",4,"ngIf"],["class","text-primary-yt-blue text-[14px] cursor-pointer underline",3,"click",4,"ngIf"],["class","!w-full !h-auto","alt","","alt","inbox-image",3,"src","click",4,"ngIf"],[3,"innerHtml"],[1,"text-primary-yt-blue","text-[14px]","cursor-pointer","underline",3,"click"],["alt","","alt","inbox-image",1,"!w-full","!h-auto",3,"src","click"]],template:function(d,a){1&d&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275listener("click",function(){return a.setReadInbox()}),t.\u0275\u0275elementStart(1,"div",1)(2,"div",2),t.\u0275\u0275element(3,"img",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",4)(5,"div",5)(6,"span",6),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"span",6),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"formatDate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(11,"h3",7),t.\u0275\u0275text(12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",8),t.\u0275\u0275template(14,x,2,1,"span",9)(15,_,1,1,"span",10)(16,E,2,1,"span",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(17,f,1,1,"img",12),t.\u0275\u0275elementEnd()()()),2&d&&(t.\u0275\u0275classMapInterpolate1("px-[16px] pt-1 ",a.isRead?"":"bg-blue-100"," cursor-pointer"),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate(a.categoryName),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind3(10,10,a.date,"DD MMMM YYYY | HH:mm",!1)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(a.title),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!a.seeMore),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",a.seeMore),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!a.seeMore),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",a.image))},dependencies:[p.NgIf,U.i],styles:["ol,ul,menu{list-style-position:inside!important;all:revert}a{color:#1caed4;text-decoration:underline}\n"],encapsulation:2})}return o})();function I(o,S){if(1&o){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"inbox-card",18),t.\u0275\u0275listener("readInboxId",function(a){t.\u0275\u0275restoreView(i);const A=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(A.setReadInbox(a))}),t.\u0275\u0275elementEnd()()}if(2&o){const i=S.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("id",i.id)("shortDescription",i.inbox.shortDescription)("description",i.inbox.description)("isRead",i.isRead)("date",i.inbox.createdAt.toString())("title",i.inbox.title)("image",i.inbox.imageUrl)("category",i.inbox.category)("type",i.inbox.eventType)("link",i.inbox.link)("broadcastName",i.inbox.broadcastName)}}function b(o,S){if(1&o){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-basic-button",22),t.\u0275\u0275listener("handleEmit",function(){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(a.loadInBox())}),t.\u0275\u0275elementEnd()}2&o&&t.\u0275\u0275property("outlined",!0)("borderColor","blue")}function L(o,S){if(1&o&&(t.\u0275\u0275elementStart(0,"div",19)(1,"div",20),t.\u0275\u0275template(2,b,1,2,"lib-basic-button",21),t.\u0275\u0275elementEnd()()),2&o){const i=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i.canLoad)}}function y(o,S){if(1&o){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"div",8)(2,"div",9)(3,"h3",10),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.markAllRead())}),t.\u0275\u0275text(4," Tandai semua dibaca "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",11)(6,"lib-basic-button",12),t.\u0275\u0275listener("handleEmit",function(){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.overviewFilter())}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",13),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.refreshInbox())}),t.\u0275\u0275element(8,"img",14),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(9,"div")(10,"div",15),t.\u0275\u0275template(11,I,2,11,"div",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(12,L,3,1,"div",17),t.\u0275\u0275elementEnd()()}if(2&o){const i=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(6),t.\u0275\u0275property("title","Filter")("outlined",!0)("disabled",!1)("icon","arrow-down")("iconPosition","right")("textColor","text-primary-yt-blue")("borderColor","blue"),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngForOf",i.listInbox),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.listInbox.length&&i.canLoad)}}function K(o,S){if(1&o){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",23)(1,"lib-basic-empty-state",24),t.\u0275\u0275listener("clickButton",function(){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.refreshInbox())})("clickButtonSecondary",function(){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.toBack())}),t.\u0275\u0275elementEnd()()}2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("image","./assets/images/png/inbox-empty-state.png")("label","Belum ada inbox")("description","Nantikan program menarik dari Youtap!")("showButton",!0)("buttonWidth","!w-auto")("buttonLabel","Refresh Inbox")("showButtonSecondary",!0)("buttonLabelSecondary","Kembali ke Halaman Utama"))}function R(o,S){if(1&o&&(t.\u0275\u0275elementStart(0,"div",5),t.\u0275\u0275template(1,y,13,9,"div",6)(2,K,2,8,"div",7),t.\u0275\u0275elementEnd()),2&o){const i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.listInbox.length>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",0===i.listInbox.length)}}function W(o,S){1&o&&(t.\u0275\u0275elementStart(0,"div",25),t.\u0275\u0275element(1,"img",26),t.\u0275\u0275elementStart(2,"h6",27),t.\u0275\u0275text(3," Tunggu sebentar yah.. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"span",28),t.\u0275\u0275text(5,"kita lagi refresh inboxnya.."),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(6,"img",29),t.\u0275\u0275elementEnd())}function B(o,S){if(1&o){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",30)(1,"span"),t.\u0275\u0275text(2,"Filter"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"i",31),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.isShowFilter=!a.isShowFilter)}),t.\u0275\u0275elementEnd()()}}function H(o,S){if(1&o){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-basic-button",34),t.\u0275\u0275listener("handleEmit",function(){const A=t.\u0275\u0275restoreView(i).$implicit,Q=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(Q.setRange(A.type))}),t.\u0275\u0275elementEnd()}if(2&o){const i=S.$implicit,d=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("title",i.name)("borderColor","blue")("width","w-full")("textColor",i.type===d.selectedRange?"text-white":"text-primary-yt-blue")("outlined",i.type!==d.selectedRange)}}function O(o,S){if(1&o&&(t.\u0275\u0275elementStart(0,"div",32),t.\u0275\u0275template(1,H,1,5,"lib-basic-button",33),t.\u0275\u0275elementEnd()),2&o){const i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",i.listRange)}}let X=(()=>{class o{constructor(i,d){this.inboxService=i,this.location=d,this.listInbox=[],this.listRange=[{name:"Semua Notifikasi",type:u.xPx.ALL},{name:"14 hari Terakhir",type:u.xPx.DAY_14},{name:"7 hari Terakhir",type:u.xPx.DAY_7}],this.totalPage=10,this.page=1,this.limit=10,this.isShowFilter=!1,this.selectedRange=u.xPx.ALL,this.isLoading=!0,this.canLoad=!1,this.checkData=0}ngOnInit(){this.isLoading=!0,this.getListInbox(),this.autoRefreshInbox()}refreshInbox(){this.listInbox=[],this.isLoading=!0,this.getListInbox()}autoRefreshInbox(){this.checkData=setInterval(i=>{this.getListInbox(),clearInterval(i)},5e3)}fetchData(){this.page=1,this.listInbox=[],this.isLoading=!0,this.getListInbox()}overviewFilter(){this.isShowFilter=!this.isShowFilter}setRange(i){this.page=1,this.selectedRange!==i&&(this.selectedRange=i,this.isShowFilter=!1,this.fetchData())}getListInbox(){this.canLoad=!0;const i={page:this.page,limit:this.limit,filter:{}};this.selectedRange!==u.xPx.ALL&&(i.filter={interval:this.selectedRange}),this.inboxService.listUserInbox({listUserInboxInput:i}).subscribe({next:({data:d})=>{this.totalPage=d.listUserInbox.totalPage||0;const a=new Set(this.listInbox.map(A=>A.id));this.listInbox=this.listInbox.concat(d.listUserInbox.userInboxes.filter(A=>!a.has(A.id))),this.isLoading=!1,this.page===d.listUserInbox.totalPage&&(this.canLoad=!1)},error:()=>{this.isLoading=!1}})}setReadInbox(i){this.inboxService.readUnreadUserInbox({readUnreadUserInboxInput:{isRead:!0,ids:[i]}}).subscribe({next:()=>{}})}markAllRead(){this.inboxService.readUnreadAllInbox({readUnreadAllUserInboxInput:{isRead:!0}}).subscribe({next:i=>{i&&this.fetchData()}})}loadInBox(){this.page=this.page+1,this.canLoad&&this.getListInbox()}toBack(){this.location.back()}ngOnDestroy(){clearInterval(this.checkData)}static#t=this.\u0275fac=function(d){return new(d||o)(t.\u0275\u0275directiveInject(u.mzz),t.\u0275\u0275directiveInject(p.Location))};static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["list-inbox"]],decls:7,vars:3,consts:[["class","mt-[3%] h-[99%] overflow-y-scroll scrollbar-hide bg-grey-6",4,"ngIf"],["class","flex flex-col items-center mt-4",4,"ngIf"],[3,"showModal"],["headerTemplate",""],["bodyTemplate",""],[1,"mt-[3%]","h-[99%]","overflow-y-scroll","scrollbar-hide","bg-grey-6"],[4,"ngIf"],["class","bg-white text-center py-5 mt-4",4,"ngIf"],[1,"flex","flex-col","p-[16px]","gap-2","sticky","top-0","bg-white"],[1,"flex","flex-row","justify-between","gap-x-2"],[1,"my-auto","text-[12px]","text-primary-yt-blue","cursor-pointer",3,"click"],[1,"flex","flex-row","gap-x-2"],["iconSize","w-4","padding","!px-2 !py-1","justifyContent","!justify-between",3,"title","outlined","disabled","icon","iconPosition","textColor","borderColor","handleEmit"],[1,"mt-1",3,"click"],["src","./assets/images/svg/reload.svg","alt",""],[1,"pb-[16px]","rounded-b-[20px]","bg-white"],[4,"ngFor","ngForOf"],["class","py-[3%] bg-grey-6",4,"ngIf"],[3,"id","shortDescription","description","isRead","date","title","image","category","type","link","broadcastName","readInboxId"],[1,"py-[3%]","bg-grey-6"],[1,"bg-white","p-[16px]"],["title","Lihat Lebih Banyak","width","w-full",3,"outlined","borderColor","handleEmit",4,"ngIf"],["title","Lihat Lebih Banyak","width","w-full",3,"outlined","borderColor","handleEmit"],[1,"bg-white","text-center","py-5","mt-4"],[3,"image","label","description","showButton","buttonWidth","buttonLabel","showButtonSecondary","buttonLabelSecondary","clickButton","clickButtonSecondary"],[1,"flex","flex-col","items-center","mt-4"],["src","./assets/images/png/kasir-digital.png","width","200px","alt","kasir-digital"],[1,"text-[16px]","text-grey-1","font-medium","mt-2","text-center"],[1,"text-[10px]","text-grey-3","text-center","mb-5"],["src","./assets/images/svg/loading.svg",1,"pb-5"],[1,"flex","flex-row","justify-between","items-center","z-10","relative","h-[5vh]"],[1,"pi","pi-times",3,"click"],[1,"flex","flex-col","gap-y-2","mt-3","max-h-[50vh]","overflow-y-scroll","scrollbar-hide"],[3,"title","borderColor","width","textColor","outlined","handleEmit",4,"ngFor","ngForOf"],[3,"title","borderColor","width","textColor","outlined","handleEmit"]],template:function(d,a){1&d&&(t.\u0275\u0275template(0,R,3,2,"div",0)(1,W,7,0,"div",1),t.\u0275\u0275elementStart(2,"lib-bottom-modal",2),t.\u0275\u0275template(3,B,4,0,"ng-template",null,3,t.\u0275\u0275templateRefExtractor)(5,O,2,1,"ng-template",null,4,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()),2&d&&(t.\u0275\u0275property("ngIf",!a.isLoading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",a.isLoading),t.\u0275\u0275advance(1),t.\u0275\u0275property("showModal",a.isShowFilter))},dependencies:[p.NgForOf,p.NgIf,h.n,P.S,T.S,s],encapsulation:2})}return o})();const G=[{path:"",component:r(78963).o,data:{canGoBack:!0},children:[{path:"",component:X,title:"Inbox"}]}];let Y=(()=>{class o{static#t=this.\u0275fac=function(d){return new(d||o)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:o});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[w.RouterModule.forChild(G),w.RouterModule]})}return o})();var $=r(19751),J=r(24260);let Z=(()=>{class o{static#t=this.\u0275fac=function(d){return new(d||o)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:o});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[p.CommonModule,Y,u.drE,$.Rq,u.hJ1,u.zkK,J.m,u.PPX]})}return o})()},25879:(F,C,r)=>{r.d(C,{O:()=>t});var p=r(17460),u=r(65662);let t=(()=>{class h{constructor(T){this.googleAnalyticsService=T}addEvent(T,D,g){this.googleAnalyticsService.event(T.toLowerCase(),D.toLowerCase(),g.toLowerCase())}static#t=this.\u0275fac=function(D){return new(D||h)(p.\u0275\u0275inject(u.$r))};static#e=this.\u0275prov=p.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},92438:(F,C,r)=>{r.d(C,{R:()=>U});var p=r(54829),w=r(65592),u=r(21631),t=r(64266),h=r(84674),P=r(97400);const T=["addListener","removeListener"],D=["addEventListener","removeEventListener"],g=["on","off"];function U(s,I,b,L){if((0,h.m)(b)&&(L=b,b=void 0),L)return U(s,I,b).pipe((0,P.Z)(L));const[y,K]=function f(s){return(0,h.m)(s.addEventListener)&&(0,h.m)(s.removeEventListener)}(s)?D.map(R=>W=>s[R](I,W,b)):function _(s){return(0,h.m)(s.addListener)&&(0,h.m)(s.removeListener)}(s)?T.map(x(s,I)):function E(s){return(0,h.m)(s.on)&&(0,h.m)(s.off)}(s)?g.map(x(s,I)):[];if(!y&&(0,t.z)(s))return(0,u.z)(R=>U(R,I,b))((0,p.Xf)(s));if(!y)throw new TypeError("Invalid event target");return new w.y(R=>{const W=(...B)=>R.next(1<B.length?B:B[0]);return y(W),()=>K(W)})}function x(s,I){return b=>L=>s[b](I,L)}},22096:(F,C,r)=>{r.d(C,{of:()=>u});var p=r(79940),w=r(9666);function u(...t){const h=(0,p.yG)(t);return(0,w.D)(t,h)}},99397:(F,C,r)=>{r.d(C,{b:()=>h});var p=r(84674),w=r(79360),u=r(8251),t=r(42737);function h(P,T,D){const g=(0,p.m)(P)||T||D?{next:P,error:T,complete:D}:P;return g?(0,w.e)((U,x)=>{var _;null===(_=g.subscribe)||void 0===_||_.call(g);let E=!0;U.subscribe((0,u.x)(x,f=>{var s;null===(s=g.next)||void 0===s||s.call(g,f),x.next(f)},()=>{var f;E=!1,null===(f=g.complete)||void 0===f||f.call(g),x.complete()},f=>{var s;E=!1,null===(s=g.error)||void 0===s||s.call(g,f),x.error(f)},()=>{var f,s;E&&(null===(f=g.unsubscribe)||void 0===f||f.call(g)),null===(s=g.finalize)||void 0===s||s.call(g)}))}):t.y}},91816:(F,C,r)=>{r.d(C,{p:()=>U});var p=r(16321),w=r(79360),u=r(8251),t=r(54829),P=r(65592),T=r(50671);function U(x,_=p.z,E){const f=function g(x=0,_,E=p.P){let f=-1;return null!=_&&((0,T.K)(_)?E=_:f=_),new P.y(s=>{let I=function D(x){return x instanceof Date&&!isNaN(x)}(x)?+x-E.now():x;I<0&&(I=0);let b=0;return E.schedule(function(){s.closed||(s.next(b++),0<=f?this.schedule(void 0,f):s.complete())},I)})}(x,_);return function h(x,_){return(0,w.e)((E,f)=>{const{leading:s=!0,trailing:I=!1}=_??{};let b=!1,L=null,y=null,K=!1;const R=()=>{y?.unsubscribe(),y=null,I&&(H(),K&&f.complete())},W=()=>{y=null,K&&f.complete()},B=O=>y=(0,t.Xf)(x(O)).subscribe((0,u.x)(f,R,W)),H=()=>{if(b){b=!1;const O=L;L=null,f.next(O),!K&&B(O)}};E.subscribe((0,u.x)(f,O=>{b=!0,L=O,(!y||y.closed)&&(s?H():B(O))},()=>{K=!0,(!(I&&b&&y)||y.closed)&&f.complete()}))})}(()=>f,E)}},16321:(F,C,r)=>{r.d(C,{P:()=>t,z:()=>u});var p=r(41954);const u=new(r(49931).v)(p.o),t=u},19751:(F,C,r)=>{r.d(C,{Rq:()=>lt,Ry:()=>ot});var p=r(17460),w=r(22096),u=r(92438),t=r(21631),h=r(37398),P=r(99397),T=r(32181),D=r(91816);function U(e,n,l,c){const m=window&&!!window.document&&window.document.documentElement;let v=m&&n?window:l;if(e&&(v=e&&m&&"string"==typeof e?function x(e,n,l){return(l?window.document:n).querySelector(e)}(e,l.nativeElement,c):e,!v))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return v}function _(e){return e&&!e.firstChange}const f={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},s={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class I{constructor(n=!0){this.vertical=n,this.propsMap=n?f:s}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function K(e){return["Window","global"].some(l=>Object.prototype.toString.call(e).includes(l))}function R(e,n){return e?n.document.documentElement:null}function W(e,n){const l=function X({container:e,isWindow:n,axis:l}){const{offsetHeightKey:c,clientHeightKey:m}=O(l);return z(e,n,c,m)}(n);return n.isWindow?function B(e,n,l){const{axis:c,container:m,isWindow:v}=l,{offsetHeightKey:M,clientHeightKey:N}=O(c),V=e+Y(R(v,m),c,v),k=z(n.nativeElement,v,M,N),j=function G(e,n,l){const c=n.topKey();if(e.getBoundingClientRect)return e.getBoundingClientRect()[c]+Y(e,n,l)}(n.nativeElement,c,v)+k;return{height:e,scrolled:V,totalToScroll:j,isWindow:v}}(l,e,n):function H(e,n,l){const{axis:c,container:m}=l;return{height:e,scrolled:m[c.scrollTopKey()],totalToScroll:m[c.scrollHeightKey()],isWindow:!1}}(l,0,n)}function O(e){return{offsetHeightKey:e.offsetHeightKey(),clientHeightKey:e.clientHeightKey()}}function z(e,n,l,c){if(isNaN(e[l])){const m=R(n,e);return m?m[c]:0}return e[l]}function Y(e,n,l){const c=n.pageYOffsetKey(),m=n.scrollTopKey(),v=n.offsetTopKey();return isNaN(window.pageYOffset)?R(l,e)[m]:e.ownerDocument?e.ownerDocument.defaultView[c]:e[v]}function $(e,n={down:0,up:0},l){let c,m;if(e.totalToScroll<=0)return!1;const v=e.isWindow?e.scrolled:e.height+e.scrolled;return l?(c=(e.totalToScroll-v)/e.totalToScroll,m=(n?.down?n.down:0)/10):(c=e.scrolled/(e.scrolled+(e.totalToScroll-v)),m=(n?.up?n.up:0)/10),c<=m}class Q{constructor({totalToScroll:n}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=n}updateScrollPosition(n){return this.lastScrollPosition=n}updateTotalToScroll(n){this.lastTotalToScroll!==n&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=n)}updateScroll(n,l){this.updateScrollPosition(n),this.updateTotalToScroll(l)}updateTriggeredFlag(n,l){l?this.triggered.down=n:this.triggered.up=n}isTriggeredScroll(n,l){return l?this.triggered.down===n:this.triggered.up===n}}const q={DOWN:"[NGX_ISE] DOWN",UP:"[NGX_ISE] UP"};function it(e){const{scrollDown:n,stats:{scrolled:l}}=e;return{type:n?q.DOWN:q.UP,payload:{currentScrollPosition:l}}}let ot=(()=>{class e{constructor(l,c){this.element=l,this.zone=c,this.scrolled=new p.EventEmitter,this.scrolledUp=new p.EventEmitter,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:l,infiniteScrollDisabled:c,infiniteScrollDistance:m}){const v=_(l),M=_(c),N=_(m),V=!M&&!this.infiniteScrollDisabled||M&&!c.currentValue||N;(v||M||N)&&(this.destroyScroller(),V&&this.setup())}setup(){(function E(){return typeof window<"u"})()&&this.zone.runOutsideAngular(()=>{this.disposeScroller=function tt(e){const{scrollContainer:n,scrollWindow:l,element:c,fromRoot:m}=e,v=function L({windowElement:e,axis:n}){return function y(e,n){const l=e.isWindow||n&&!n.nativeElement?n:n.nativeElement;return{...e,container:l}}({axis:n,isWindow:K(e)},e)}({axis:new I(!e.horizontal),windowElement:U(n,l,c,m)}),M=new Q({totalToScroll:W(c,v)}),V={up:e.upDistance,down:e.downDistance};return function et(e){let n=(0,u.R)(e.container,"scroll");return e.throttle&&(n=n.pipe((0,D.p)(e.throttle,void 0,{leading:!0,trailing:!0}))),n}({container:v.container,throttle:e.throttle}).pipe((0,t.z)(()=>(0,w.of)(W(c,v))),(0,h.U)(k=>function nt(e,n,l){const{scrollDown:c,fire:m}=function Z(e,n,l){const c=function J(e,n){return e<n.scrolled}(e,n);return{fire:$(n,l,c),scrollDown:c}}(e,n,l);return{scrollDown:c,fire:m,stats:n}}(M.lastScrollPosition,k,V)),(0,P.b)(({stats:k})=>M.updateScroll(k.scrolled,k.totalToScroll)),(0,T.h)(({fire:k,scrollDown:j,stats:{totalToScroll:st}})=>function b(e,n,l){return!!(e&&n||!l&&n)}(e.alwaysCallback,k,M.isTriggeredScroll(st,j))),(0,P.b)(({scrollDown:k,stats:{totalToScroll:j}})=>{M.updateTriggeredFlag(j,k)}),(0,h.U)(it))}({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(l=>this.handleOnScroll(l))})}handleOnScroll({type:l,payload:c}){const m=l===q.DOWN?this.scrolled:this.scrolledUp;(function rt(e){return e.observed??e.observers.length>0})(m)&&this.zone.run(()=>m.emit(c))}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}return e.\u0275fac=function(l){return new(l||e)(p.\u0275\u0275directiveInject(p.ElementRef),p.\u0275\u0275directiveInject(p.NgZone))},e.\u0275dir=p.\u0275\u0275defineDirective({type:e,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[p.\u0275\u0275NgOnChangesFeature]}),e})(),lt=(()=>{class e{}return e.\u0275fac=function(l){return new(l||e)},e.\u0275mod=p.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=p.\u0275\u0275defineInjector({}),e})()}}]);