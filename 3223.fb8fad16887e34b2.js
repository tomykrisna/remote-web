(self.webpackChunkyoutapPosReport=self.webpackChunkyoutapPosReport||[]).push([[3223],{3223:(N,M,a)=>{a.r(M),a.d(M,{AnalysisModule:()=>ht});var h=a(4887),f=a(4398),p=a(6293),y=a(3304),P=a(5695),g=a(6e3),B=a(6457),x=a(5347),t=a(7460),T=a(9275);let A=(()=>{class l extends x.u{constructor(){super(...arguments),this.showButton=!1,this.filter="quantity"}onInjectInputs(o){this.title=o.title,this.showButton=o.closeButton,this.filter=o.data.filter}select(o){this.close(o)}cancel(){this.dismiss({})}static#t=this.\u0275fac=(()=>{let o;return function(r){return(o||(o=t.\u0275\u0275getInheritedFactory(l)))(r||l)}})();static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["filter-modal-analysis"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:5,vars:10,consts:[[1,"flex","flex-col","gap-y-4","mt-4"],[1,"text-14px]","text-primary-yt-dark-blue"],[3,"outlined","title","borderColor","width","textColor","handleEmit"]],template:function(s,r){1&s&&(t.\u0275\u0275elementStart(0,"div",0)(1,"span",1),t.\u0275\u0275text(2,"Urutkan laporan berdasarkan"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"lib-basic-button",2),t.\u0275\u0275listener("handleEmit",function(){return r.select("quantity")}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"lib-basic-button",2),t.\u0275\u0275listener("handleEmit",function(){return r.select("price")}),t.\u0275\u0275elementEnd()()),2&s&&(t.\u0275\u0275advance(3),t.\u0275\u0275property("outlined","quantity"!==r.filter)("title","Jumlah Terjual")("borderColor","blue")("width","w-full")("textColor","quantity"===r.filter?"text-white":"text-primary-yt-blue"),t.\u0275\u0275advance(1),t.\u0275\u0275property("outlined","price"!==r.filter)("title","Jumlah Pendapatan")("borderColor","blue")("width","w-full")("textColor","price"===r.filter?"text-white":"text-primary-yt-blue"))},dependencies:[T.n],encapsulation:2})}return l})();var V=a(870),O=a(6698),_=a(5574),S=a(6687),G=a(8920),J=a(6890),Q=a(3921),Z=a(6608),L=a(4260),W=a(6033),q=a(9523);function tt(l,b){if(1&l&&(t.\u0275\u0275elementStart(0,"div",23),t.\u0275\u0275element(1,"lib-analysis-product-card",24),t.\u0275\u0275elementEnd()),2&l){const o=b.$implicit,s=b.index;t.\u0275\u0275advance(1),t.\u0275\u0275property("index",s)("productImage",o.productImage)("productName",o.productName)("productType",o.categoryName)("productPrice",o.price)("productSell",o.quantity)("totalRevenue",o.subtotal)}}function K(l,b){if(1&l&&(t.\u0275\u0275elementStart(0,"div",18)(1,"div",19)(2,"span",20),t.\u0275\u0275text(3,"Update Terakhir "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"span",21),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"formatDate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(7,tt,2,7,"div",22),t.\u0275\u0275elementEnd()),2&l){const o=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind2(6,2,o.latestTransactionDate,"DD MMM YYYY, HH:mm")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",o.productAnalytics)}}function et(l,b){if(1&l){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-basic-button",27),t.\u0275\u0275listener("handleEmit",function(){t.\u0275\u0275restoreView(o);const r=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(r.handleLoadMoreDate())}),t.\u0275\u0275elementEnd()}2&l&&t.\u0275\u0275property("title","Muat Lebih Banyak")("width","!w-full")}function nt(l,b){if(1&l&&(t.\u0275\u0275elementStart(0,"div",25),t.\u0275\u0275template(1,et,1,2,"lib-basic-button",26),t.\u0275\u0275elementEnd()),2&l){const o=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.loadMore&&!o.loading)}}function ot(l,b){if(1&l){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-basic-empty-state",28),t.\u0275\u0275listener("clickButton",function(){t.\u0275\u0275restoreView(o);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.goToPOS())}),t.\u0275\u0275elementEnd()}2&l&&t.\u0275\u0275property("showButton",!0)("buttonLabel","Buka Youtap POS")}function it(l,b){if(1&l){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-basic-empty-state",29),t.\u0275\u0275listener("clickButton",function(){t.\u0275\u0275restoreView(o);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.verifyAccount())}),t.\u0275\u0275elementEnd()}2&l&&t.\u0275\u0275property("showButton",!0)("buttonLabel","Verifikasi Akun")}function lt(l,b){1&l&&(t.\u0275\u0275elementStart(0,"div",30),t.\u0275\u0275element(1,"p-skeleton",31)(2,"p-skeleton",31)(3,"p-skeleton",31),t.\u0275\u0275elementEnd())}function at(l,b){if(1&l){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",32)(1,"span"),t.\u0275\u0275text(2,"Download"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"i",33),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.showDownloadReport=!r.showDownloadReport)}),t.\u0275\u0275elementEnd()()}}function st(l,b){if(1&l){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",34)(1,"lib-basic-button",35),t.\u0275\u0275listener("handleEmit",function(){t.\u0275\u0275restoreView(o);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.downloadByDateModal())}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"lib-basic-button",35),t.\u0275\u0275listener("handleEmit",function(){t.\u0275\u0275restoreView(o);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.showMonthModal())}),t.\u0275\u0275elementEnd()()}2&l&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("title","Laporan Tanggal Terpilih")("borderColor","blue")("width","w-full")("textColor","text-white"),t.\u0275\u0275advance(1),t.\u0275\u0275property("title","Mutasi Bulanan")("borderColor","blue")("width","w-full")("textColor","text-white"))}function rt(l,b){if(1&l){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",32)(1,"span"),t.\u0275\u0275text(2,"Download"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"i",33),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.isShowModal=!1)}),t.\u0275\u0275elementEnd()()}}function Y(l,b){if(1&l){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"lib-basic-button",39),t.\u0275\u0275listener("handleEmit",function(){const v=t.\u0275\u0275restoreView(o).$implicit,I=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(I.downloadModal(v))}),t.\u0275\u0275elementEnd()()}if(2&l){const o=b.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("title",o.month)("bColor","!bg-blue")("borderColor","blue")("width","w-full")("textColor","text-white")}}function j(l,b){if(1&l&&(t.\u0275\u0275elementStart(0,"p",36),t.\u0275\u0275text(1," Pilih salah satu bulan yang ingin dimutasi"),t.\u0275\u0275element(2,"br"),t.\u0275\u0275elementStart(3,"span",21),t.\u0275\u0275text(4,"(Hanya dapat mengunduh 1 file dalam 1 hari)"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"div",37),t.\u0275\u0275template(6,Y,2,5,"div",38),t.\u0275\u0275elementEnd()),2&l){const o=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(6),t.\u0275\u0275property("ngForOf",o.arrMonth)}}function ct(l,b){if(1&l){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"div",2),t.\u0275\u0275elementStart(2,"div",3)(3,"div",4)(4,"div",5)(5,"lib-date-range-input",6),t.\u0275\u0275listener("ngModelChange",function(r){t.\u0275\u0275restoreView(o);const v=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(v.dateRange=r)})("ngModelChange",function(r){t.\u0275\u0275restoreView(o);const v=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(v.setChangeDate(r))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"img",7),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.filterSort())}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"img",8),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.showDownloadReport=!r.showDownloadReport)}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(8,K,8,5,"div",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(9,nt,2,1,"div",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(10,ot,1,2,"lib-basic-empty-state",11)(11,it,1,2,"lib-basic-empty-state",12)(12,lt,4,0,"div",13),t.\u0275\u0275elementStart(13,"lib-bottom-modal",14),t.\u0275\u0275listener("closeOutsideModal",function(){t.\u0275\u0275restoreView(o);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.showDownloadReport=!r.showDownloadReport)}),t.\u0275\u0275template(14,at,4,0,"ng-template",null,15,t.\u0275\u0275templateRefExtractor)(16,st,3,8,"ng-template",null,16,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"lib-bottom-modal",17),t.\u0275\u0275template(19,rt,4,0,"ng-template",null,15,t.\u0275\u0275templateRefExtractor)(21,j,7,1,"ng-template",null,16,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()()}if(2&l){const o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275property("ngModel",o.dateRange)("minDate",o.minDate)("maxDate",o.maxDate),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",o.productAnalytics.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.loadMore&&o.listProductAnalytics.listProductAnalytics.data.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!o.loading&&o.isVerified&&!o.productAnalytics.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!o.loading&&!o.isVerified&&!o.productAnalytics.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("showModal",o.showDownloadReport),t.\u0275\u0275advance(5),t.\u0275\u0275property("showModal",o.isShowModal)}}const z=[{path:"",component:(()=>{class l{constructor(o,s,r,v,I,k,F,E){this.activatedRoute=o,this.router=s,this.transactionService=r,this.modalService=v,this.authData=I,this.http=k,this.deeplinkService=F,this.gaService=E,this.start="",this.loading=!1,this.loadingDownload=!1,this.filter="quantity",this.productAnalytics=[],this.page=1,this.startDate=y().format("YYYY-MM-DD"),this.endDate=y().format("YYYY-MM-DD"),this.minDate=y().subtract(1,"month").toDate(),this.maxDate=new Date,this.loadMore=!1,this.dateRange=[new Date,new Date],this.isShowModal=!1,this.showDownloadReport=!1,this.start=this.activatedRoute.snapshot?.queryParamMap.get("start")||""}ngOnInit(){this.start&&(this.startDate=this.start),this.getDetailProfile(),this.getListProductAnalytics()}getDetailProfile(){this.authData.user&&(this.isVerified=this.authData.user.merchant.accountType===p.tO8.premium)}setChangeDate(o){o[0]&&o[1]&&(this.page=1,this.productAnalytics=[],this.startDate=y(o[0]).format("YYYY-MM-DD"),this.endDate=y(o[1]).format("YYYY-MM-DD"),this.getListProductAnalytics())}handleLoadMoreDate(){this.loading=!1,this.page=this.page+1,this.getListProductAnalytics()}getListProductAnalytics(){this.loading=!0,this.loadMore=!0,this.transactionService.listProductAnalytics({listProductAnalyticsInput:{page:this.page,perPage:10,orderBy:"quantity"===this.filter?p.KpW.QUANTITY:p.KpW.PRICE,startDate:this.startDate,endDate:this.endDate,merchantId:""}}).subscribe({next:({data:s})=>{this.loading=!1,this.listProductAnalytics=s,s.listProductAnalytics.data.forEach(r=>{this.productAnalytics.push(r)}),this.page===s.listProductAnalytics.totalPage&&(this.loadMore=!1)},error:()=>{this.loading=!1}})}downloadByDateModal(){this.isShowModal=!1,this.modalService.open(B.T,{title:"Download",closeButton:!0}).onResult().subscribe(s=>{switch(s){case"csv":this.downloadProductAnalysisByDate("csv");break;case"excel":this.downloadProductAnalysisByDate("excel")}})}downloadProductAnalysisByDate(o){const s=P.environment.POS_API_URL+"/product-analytics/generate-report";this.loadingDownload=!0;let r=new g.HttpParams;r=r.set("startDate",this.startDate),r=r.set("endDate",this.endDate),r=r.set("fileType",o),r=r.set("orderBy","quantity"===this.filter?"quantity":"price");const v=new g.HttpHeaders({Authorization:`Bearer ${this.authData.token}`});this.http.get(s,{headers:v,params:r,responseType:"blob"}).subscribe(I=>{const k=new Blob([I],{type:I.type}),F=window.URL.createObjectURL(k),E=document.createElement("a");E.href=F,E.download=`Laporan Analisis Produk ${this.startDate} - ${this.endDate}`,document.body.appendChild(E),E.click(),document.body.removeChild(E),this.showDownloadReport=!1})}downloadFileProductAnalysis(o,s){const r=P.environment.POS_API_URL+"/product-analytics/generate-report";this.loadingDownload=!0;let v=new g.HttpParams;s&&(v=v.set("yyyymm",s.year+s.stringMonth)),o&&(v=v.set("fileType",o));const I=new g.HttpHeaders({Authorization:`Bearer ${this.authData.token}`});this.http.get(r,{headers:I,params:v,responseType:"blob"}).subscribe(k=>{const F=new Blob([k],{type:k.type}),E=window.URL.createObjectURL(F),R=document.createElement("a");R.href=E,R.download=`Laporan Analisis Produk bulan ${s.month} ${s.year}`,document.body.appendChild(R),R.click(),document.body.removeChild(R)})}goToPOS(){this.gaService.addEvent("buka_pos_product_analysis","buka_pos",""),this.deeplinkService.toAppPos()}verifyAccount(){this.router.navigate(["/register/login-kyc"])}downloadModal(o){this.isShowModal=!1,this.modalService.open(B.T,{title:"Download",closeButton:!0}).onResult().subscribe(r=>{switch(r){case"csv":this.downloadFileProductAnalysis("csv",o);break;case"excel":this.downloadFileProductAnalysis("excel",o)}})}filterSort(){this.modalService.open(A,{title:"Filter",closeButton:!0,data:{filter:this.filter}}).onResult().subscribe(s=>{this.page=1,this.filter=s,this.productAnalytics=[],this.getListProductAnalytics()},s=>s)}getTransactionUpdatedAt(){this.transactionService.transactionUpdatedAt().subscribe({next:({data:o})=>{o.transactionUpdatedAt.date&&(this.latestTransactionDate=o.transactionUpdatedAt.date)},error:()=>{}})}showMonthModal(){const o=[];for(let s=1;s<=3;s++)o.push({month:y().subtract(s,"month").format("MMMM"),indexMonth:y().subtract(s,"month").toDate().getMonth(),stringMonth:y().subtract(s,"month").format("MM"),year:y().subtract(s,"month").format("YYYY")});this.arrMonth=o,this.showDownloadReport=!this.showDownloadReport,this.isShowModal=!0}static#t=this.\u0275fac=function(s){return new(s||l)(t.\u0275\u0275directiveInject(f.ActivatedRoute),t.\u0275\u0275directiveInject(f.Router),t.\u0275\u0275directiveInject(p.pXi),t.\u0275\u0275directiveInject(O.Z),t.\u0275\u0275directiveInject(V.x),t.\u0275\u0275directiveInject(g.HttpClient),t.\u0275\u0275directiveInject(_._),t.\u0275\u0275directiveInject(S.O))};static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["product-analysis"]],decls:2,vars:1,consts:[["id","list-product-analysis",1,"flex","flex-col","my-[3%]","overflow-y-scroll","scrollbar-hide","h-full","bg-neutral-grey-6"],[4,"ngIf"],[1,"spacer","h-[14px]","bg-neutral-grey-6"],[1,"bg-white"],[1,"flex","flex-col","p-[16px]","gap-y-3"],[1,"flex","flex-row","gap-x-4"],["placeholder","Pilih tanggal laporan",1,"w-full",3,"ngModel","minDate","maxDate","ngModelChange"],["src","./assets/images/png/button-filter-2.png","alt","filter-button","width","43px",1,"cursor-pointer","!h-[43px]",3,"click"],["src","./assets/images/png/button-download.png","alt","download-button","width","43px",1,"cursor-pointer","!h-[43px]",3,"click"],["class","flex flex-col gap-y-4",4,"ngIf"],["class","flex flex-col px-[16px]",4,"ngIf"],["image","./assets/images/png/empty-transaction-subscription.png","label","Wah.. tidak ada transaksi ditanggal ini, yuks pilih tanggal yang lain..","description","Ayo, Lakukan transaksi sekarang dari Youtap POS!",3,"showButton","buttonLabel","clickButton",4,"ngIf"],["image","./assets/images/png/sending-otp.png","label","Kamu belum melakukan verifikasi!","description","Lakukan verifikasi dan buat transaksi melalui Youtap POS sekarang.",3,"showButton","buttonLabel","clickButton",4,"ngIf"],["class","flex flex-col p-[16px] gap-y-3 bg-white",4,"ngIf"],[3,"showModal","closeOutsideModal"],["headerTemplate",""],["bodyTemplate",""],[3,"showModal"],[1,"flex","flex-col","gap-y-4"],[1,"text-[10px]"],[1,"text-grey-4"],[1,"text-grey-3"],["class","flex flex-col",4,"ngFor","ngForOf"],[1,"flex","flex-col"],[3,"index","productImage","productName","productType","productPrice","productSell","totalRevenue"],[1,"flex","flex-col","px-[16px]"],[3,"title","width","handleEmit",4,"ngIf"],[3,"title","width","handleEmit"],["image","./assets/images/png/empty-transaction-subscription.png","label","Wah.. tidak ada transaksi ditanggal ini, yuks pilih tanggal yang lain..","description","Ayo, Lakukan transaksi sekarang dari Youtap POS!",3,"showButton","buttonLabel","clickButton"],["image","./assets/images/png/sending-otp.png","label","Kamu belum melakukan verifikasi!","description","Lakukan verifikasi dan buat transaksi melalui Youtap POS sekarang.",3,"showButton","buttonLabel","clickButton"],[1,"flex","flex-col","p-[16px]","gap-y-3","bg-white"],["width","100%","height","7rem"],[1,"flex","flex-row","justify-between","items-center","z-10","relative","h-[5vh]"],[1,"pi","pi-times",3,"click"],[1,"flex","flex-col","gap-y-2","mt-3","max-h-[50vh]","overflow-y-scroll","scrollbar-hide"],[3,"title","borderColor","width","textColor","handleEmit"],[1,"text-[14px]","text-primary-yt-dark-blue","bg-blue-"],[1,"flex","flex-col","gap-y-2","mt-3"],[4,"ngFor","ngForOf"],[3,"title","bColor","borderColor","width","textColor","handleEmit"]],template:function(s,r){1&s&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,ct,23,10,"div",1),t.\u0275\u0275elementEnd()),2&s&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.listProductAnalytics))},dependencies:[h.NgForOf,h.NgIf,G.V,T.n,J.S,Q.n,Z.S,L.O,W.NgControlStatus,W.NgModel,q.i],encapsulation:2})}return l})(),title:"Analisis-Produk",data:{pageTitle:"Analisis Produk"}}];let dt=(()=>{class l{static#t=this.\u0275fac=function(s){return new(s||l)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:l});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[f.RouterModule.forChild(z),f.RouterModule]})}return l})();var $=a(1482);let ut=(()=>{class l{static#t=this.\u0275fac=function(s){return new(s||l)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:l});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[h.CommonModule,p.dTQ,p.hJ1,W.FormsModule,p.$QN,p.FFv,$.Rq,p.Pl,L.m,p.PPX,p.gPf,p.drE,p.zkK]})}return l})();var X=a(3985),pt=a(1685),ft=a(2168);let ht=(()=>{class l{static#t=this.\u0275fac=function(s){return new(s||l)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:l});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({providers:[pt._M,g.HttpClient,p.pXi,{provide:"BASE_URL_BOS_API",useClass:ft.G,useValue:P.environment.BOS_API_URL}],imports:[h.CommonModule,dt,p.dTQ,ut,p.hJ1,p.PPX,p.gPf,p.zkK,p.drE,L.m,W.FormsModule,g.HttpClientModule,X.p]})}return l})()},6457:(N,M,a)=>{a.d(M,{T:()=>P});var h=a(5347),f=a(7460),y=a(9275);let P=(()=>{class g extends h.u{constructor(){super(...arguments),this.showModal=!1}onInjectInputs(x){this.title=x.title,this.showModal=x.closeButton}select(x){this.close(x)}cancel(){this.dismiss({})}static#t=this.\u0275fac=(()=>{let x;return function(T){return(x||(x=f.\u0275\u0275getInheritedFactory(g)))(T||g)}})();static#e=this.\u0275cmp=f.\u0275\u0275defineComponent({type:g,selectors:[["download-modal-analysis"]],features:[f.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[1,"flex","flex-col","gap-y-4","mt-4"],[3,"title","width","handleEmit"]],template:function(t,T){1&t&&(f.\u0275\u0275elementStart(0,"div",0)(1,"lib-basic-button",1),f.\u0275\u0275listener("handleEmit",function(){return T.select("excel")}),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(2,"lib-basic-button",1),f.\u0275\u0275listener("handleEmit",function(){return T.select("csv")}),f.\u0275\u0275elementEnd()()),2&t&&(f.\u0275\u0275advance(1),f.\u0275\u0275property("title","Excel File")("width","w-full"),f.\u0275\u0275advance(1),f.\u0275\u0275property("title","CSV File")("width","w-full"))},dependencies:[y.n],encapsulation:2})}return g})()},2096:(N,M,a)=>{a.d(M,{of:()=>p});var h=a(9940),f=a(9666);function p(...y){const P=(0,h.yG)(y);return(0,f.D)(y,P)}},9397:(N,M,a)=>{a.d(M,{b:()=>P});var h=a(4674),f=a(9360),p=a(8251),y=a(2737);function P(g,B,x){const t=(0,h.m)(g)||B||x?{next:g,error:B,complete:x}:g;return t?(0,f.e)((T,A)=>{var V;null===(V=t.subscribe)||void 0===V||V.call(t);let O=!0;T.subscribe((0,p.x)(A,_=>{var S;null===(S=t.next)||void 0===S||S.call(t,_),A.next(_)},()=>{var _;O=!1,null===(_=t.complete)||void 0===_||_.call(t),A.complete()},_=>{var S;O=!1,null===(S=t.error)||void 0===S||S.call(t,_),A.error(_)},()=>{var _,S;O&&(null===(_=t.unsubscribe)||void 0===_||_.call(t)),null===(S=t.finalize)||void 0===S||S.call(t)}))}):y.y}},1482:(N,M,a)=>{a.d(M,{Ry:()=>bt,Rq:()=>xt});var h=a(7460),f=a(2096),p=a(2438),y=a(1631),P=a(7398),g=a(9397),B=a(2181),x=a(1954);const T=new(a(9931).v)(x.o),A=T;var V=a(9360),O=a(8251),_=a(4829),G=a(5592),J=a(671);function L(e,n=T,i){const c=function Z(e=0,n,i=A){let c=-1;return null!=n&&((0,J.K)(n)?i=n:c=n),new G.y(d=>{let u=function Q(e){return e instanceof Date&&!isNaN(e)}(e)?+e-i.now():e;u<0&&(u=0);let m=0;return i.schedule(function(){d.closed||(d.next(m++),0<=c?this.schedule(void 0,c):d.complete())},u)})}(e,n);return function S(e,n){return(0,V.e)((i,c)=>{const{leading:d=!0,trailing:u=!1}=n??{};let m=!1,D=null,w=null,C=!1;const H=()=>{w?.unsubscribe(),w=null,u&&(vt(),C&&c.complete())},mt=()=>{w=null,C&&c.complete()},yt=U=>w=(0,_.Xf)(e(U)).subscribe((0,O.x)(c,H,mt)),vt=()=>{if(m){m=!1;const U=D;D=null,c.next(U),!C&&yt(U)}};i.subscribe((0,O.x)(c,U=>{m=!0,D=U,(!w||w.closed)&&(d?vt():yt(U))},()=>{C=!0,(!(u&&m&&w)||w.closed)&&c.complete()}))})}(()=>c,i)}function q(e,n,i,c){const d=window&&!!window.document&&window.document.documentElement;let u=d&&n?window:i;if(e&&(u=e&&d&&"string"==typeof e?function tt(e,n,i){return(i?window.document:n).querySelector(e)}(e,i.nativeElement,c):e,!u))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return u}function K(e){return e&&!e.firstChange}const nt={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},ot={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class it{constructor(n=!0){this.vertical=n,this.propsMap=n?nt:ot}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function rt(e){return["Window","global"].some(i=>Object.prototype.toString.call(e).includes(i))}function Y(e,n){return e?n.document.documentElement:null}function j(e,n){const i=function dt({container:e,isWindow:n,axis:i}){const{offsetHeightKey:c,clientHeightKey:d}=z(i);return $(e,n,c,d)}(n);return n.isWindow?function ct(e,n,i){const{axis:c,container:d,isWindow:u}=i,{offsetHeightKey:m,clientHeightKey:D}=z(c),w=e+X(Y(u,d),c,u),C=$(n.nativeElement,u,m,D),H=function ut(e,n,i){const c=n.topKey();if(e.getBoundingClientRect)return e.getBoundingClientRect()[c]+X(e,n,i)}(n.nativeElement,c,u)+C;return{height:e,scrolled:w,totalToScroll:H,isWindow:u}}(i,e,n):function gt(e,n,i){const{axis:c,container:d}=i;return{height:e,scrolled:d[c.scrollTopKey()],totalToScroll:d[c.scrollHeightKey()],isWindow:!1}}(i,0,n)}function z(e){return{offsetHeightKey:e.offsetHeightKey(),clientHeightKey:e.clientHeightKey()}}function $(e,n,i,c){if(isNaN(e[i])){const d=Y(n,e);return d?d[c]:0}return e[i]}function X(e,n,i){const c=n.pageYOffsetKey(),d=n.scrollTopKey(),u=n.offsetTopKey();return isNaN(window.pageYOffset)?Y(i,e)[d]:e.ownerDocument?e.ownerDocument.defaultView[c]:e[u]}function pt(e,n={down:0,up:0},i){let c,d;if(e.totalToScroll<=0)return!1;const u=e.isWindow?e.scrolled:e.height+e.scrolled;return i?(c=(e.totalToScroll-u)/e.totalToScroll,d=(n?.down?n.down:0)/10):(c=e.scrolled/(e.scrolled+(e.totalToScroll-u)),d=(n?.up?n.up:0)/10),c<=d}class I{constructor({totalToScroll:n}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=n}updateScrollPosition(n){return this.lastScrollPosition=n}updateTotalToScroll(n){this.lastTotalToScroll!==n&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=n)}updateScroll(n,i){this.updateScrollPosition(n),this.updateTotalToScroll(i)}updateTriggeredFlag(n,i){i?this.triggered.down=n:this.triggered.up=n}isTriggeredScroll(n,i){return i?this.triggered.down===n:this.triggered.up===n}}const R={DOWN:"[NGX_ISE] DOWN",UP:"[NGX_ISE] UP"};function _t(e){const{scrollDown:n,stats:{scrolled:i}}=e;return{type:n?R.DOWN:R.UP,payload:{currentScrollPosition:i}}}let bt=(()=>{class e{constructor(i,c){this.element=i,this.zone=c,this.scrolled=new h.EventEmitter,this.scrolledUp=new h.EventEmitter,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:i,infiniteScrollDisabled:c,infiniteScrollDistance:d}){const u=K(i),m=K(c),D=K(d),w=!m&&!this.infiniteScrollDisabled||m&&!c.currentValue||D;(u||m||D)&&(this.destroyScroller(),w&&this.setup())}setup(){(function et(){return typeof window<"u"})()&&this.zone.runOutsideAngular(()=>{this.disposeScroller=function k(e){const{scrollContainer:n,scrollWindow:i,element:c,fromRoot:d}=e,u=function at({windowElement:e,axis:n}){return function st(e,n){const i=e.isWindow||n&&!n.nativeElement?n:n.nativeElement;return{...e,container:i}}({axis:n,isWindow:rt(e)},e)}({axis:new it(!e.horizontal),windowElement:q(n,i,c,d)}),m=new I({totalToScroll:j(c,u)}),w={up:e.upDistance,down:e.downDistance};return function F(e){let n=(0,p.R)(e.container,"scroll");return e.throttle&&(n=n.pipe(L(e.throttle,void 0,{leading:!0,trailing:!0}))),n}({container:u.container,throttle:e.throttle}).pipe((0,y.z)(()=>(0,f.of)(j(c,u))),(0,P.U)(C=>function E(e,n,i){const{scrollDown:c,fire:d}=function ht(e,n,i){const c=function ft(e,n){return e<n.scrolled}(e,n);return{fire:pt(n,i,c),scrollDown:c}}(e,n,i);return{scrollDown:c,fire:d,stats:n}}(m.lastScrollPosition,C,w)),(0,g.b)(({stats:C})=>m.updateScroll(C.scrolled,C.totalToScroll)),(0,B.h)(({fire:C,scrollDown:H,stats:{totalToScroll:mt}})=>function lt(e,n,i){return!!(e&&n||!i&&n)}(e.alwaysCallback,C,m.isTriggeredScroll(mt,H))),(0,g.b)(({scrollDown:C,stats:{totalToScroll:H}})=>{m.updateTriggeredFlag(H,C)}),(0,P.U)(_t))}({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(i=>this.handleOnScroll(i))})}handleOnScroll({type:i,payload:c}){const d=i===R.DOWN?this.scrolled:this.scrolledUp;(function wt(e){return e.observed??e.observers.length>0})(d)&&this.zone.run(()=>d.emit(c))}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}return e.\u0275fac=function(i){return new(i||e)(h.\u0275\u0275directiveInject(h.ElementRef),h.\u0275\u0275directiveInject(h.NgZone))},e.\u0275dir=h.\u0275\u0275defineDirective({type:e,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[h.\u0275\u0275NgOnChangesFeature]}),e})(),xt=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=h.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=h.\u0275\u0275defineInjector({}),e})()}}]);