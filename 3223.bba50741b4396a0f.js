(self.webpackChunkyoutapPosReport=self.webpackChunkyoutapPosReport||[]).push([[3223],{3223:(W,T,l)=>{l.r(T),l.d(T,{AnalysisModule:()=>J});var g=l(4887),f=l(4398),p=l(2575),y=l(3304),b=l(5695),h=l(6e3),P=l(6457),C=l(5347),t=l(7460),M=l(9275);let O=(()=>{class a extends C.u{constructor(){super(...arguments),this.showButton=!1,this.filter="quantity"}onInjectInputs(o){this.title=o.title,this.showButton=o.closeButton,this.filter=o.data.filter}select(o){this.close(o)}cancel(){this.dismiss({})}static#t=this.\u0275fac=(()=>{let o;return function(s){return(o||(o=t.\u0275\u0275getInheritedFactory(a)))(s||a)}})();static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["filter-modal-analysis"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:5,vars:10,consts:[[1,"flex","flex-col","gap-y-4","mt-4"],[1,"text-14px]","text-primary-yt-dark-blue"],[3,"outlined","title","borderColor","width","textColor","handleEmit"]],template:function(r,s){1&r&&(t.\u0275\u0275elementStart(0,"div",0)(1,"span",1),t.\u0275\u0275text(2,"Urutkan laporan berdasarkan"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"lib-basic-button",2),t.\u0275\u0275listener("handleEmit",function(){return s.select("quantity")}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"lib-basic-button",2),t.\u0275\u0275listener("handleEmit",function(){return s.select("price")}),t.\u0275\u0275elementEnd()()),2&r&&(t.\u0275\u0275advance(3),t.\u0275\u0275property("outlined","quantity"!==s.filter)("title","Jumlah Terjual")("borderColor","blue")("width","w-full")("textColor","quantity"===s.filter?"text-white":"text-primary-yt-blue"),t.\u0275\u0275advance(1),t.\u0275\u0275property("outlined","price"!==s.filter)("title","Jumlah Pendapatan")("borderColor","blue")("width","w-full")("textColor","price"===s.filter?"text-white":"text-primary-yt-blue"))},dependencies:[M.n],encapsulation:2})}return a})();var R=l(870),B=l(6698),x=l(5574),D=l(6687),Q=l(8920),N=l(6890),z=l(3921),G=l(6608),K=l(4260),U=l(6033),$=l(9523);function Z(a,S){if(1&a&&(t.\u0275\u0275elementStart(0,"div",23),t.\u0275\u0275element(1,"lib-analysis-product-card",24),t.\u0275\u0275elementEnd()),2&a){const o=S.$implicit,r=S.index;t.\u0275\u0275advance(1),t.\u0275\u0275property("index",r)("productImage",o.productImage)("productName",o.productName)("productType",o.categoryName)("productPrice",o.price)("productSell",o.quantity)("totalRevenue",o.subtotal)}}function q(a,S){if(1&a&&(t.\u0275\u0275elementStart(0,"div",18)(1,"div",19)(2,"span",20),t.\u0275\u0275text(3,"Update Terakhir "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"span",21),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"formatDate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(7,Z,2,7,"div",22),t.\u0275\u0275elementEnd()),2&a){const o=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind2(6,2,o.latestTransactionDate,"DD MMM YYYY, HH:mm")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",o.productAnalytics)}}function X(a,S){if(1&a){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-basic-button",27),t.\u0275\u0275listener("handleEmit",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(s.handleLoadMoreDate())}),t.\u0275\u0275elementEnd()}2&a&&t.\u0275\u0275property("title","Muat Lebih Banyak")("width","!w-full")}function tt(a,S){if(1&a&&(t.\u0275\u0275elementStart(0,"div",25),t.\u0275\u0275template(1,X,1,2,"lib-basic-button",26),t.\u0275\u0275elementEnd()),2&a){const o=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.loadMore&&!o.loading)}}function et(a,S){if(1&a){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-basic-empty-state",28),t.\u0275\u0275listener("clickButton",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.goToPOS())}),t.\u0275\u0275elementEnd()}2&a&&t.\u0275\u0275property("showButton",!0)("buttonLabel","Buka Youtap POS")}function nt(a,S){if(1&a){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-basic-empty-state",29),t.\u0275\u0275listener("clickButton",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.verifyAccount())}),t.\u0275\u0275elementEnd()}2&a&&t.\u0275\u0275property("showButton",!0)("buttonLabel","Verifikasi Akun")}function ot(a,S){1&a&&(t.\u0275\u0275elementStart(0,"div",30),t.\u0275\u0275element(1,"p-skeleton",31)(2,"p-skeleton",31)(3,"p-skeleton",31),t.\u0275\u0275elementEnd())}function it(a,S){if(1&a){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",32)(1,"span"),t.\u0275\u0275text(2,"Download"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"i",33),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.showDownloadReport=!s.showDownloadReport)}),t.\u0275\u0275elementEnd()()}}function gt(a,S){if(1&a){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",34)(1,"lib-basic-button",35),t.\u0275\u0275listener("handleEmit",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.downloadByDateModal())}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"lib-basic-button",35),t.\u0275\u0275listener("handleEmit",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.showMonthModal())}),t.\u0275\u0275elementEnd()()}2&a&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("title","Laporan Tanggal Terpilih")("borderColor","blue")("width","w-full")("textColor","text-white"),t.\u0275\u0275advance(1),t.\u0275\u0275property("title","Mutasi Bulanan")("borderColor","blue")("width","w-full")("textColor","text-white"))}function lt(a,S){if(1&a){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",32)(1,"span"),t.\u0275\u0275text(2,"Download"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"i",33),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.isShowModal=!1)}),t.\u0275\u0275elementEnd()()}}function at(a,S){if(1&a){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"lib-basic-button",39),t.\u0275\u0275listener("handleEmit",function(){const _=t.\u0275\u0275restoreView(o).$implicit,A=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(A.downloadModal(_))}),t.\u0275\u0275elementEnd()()}if(2&a){const o=S.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("title",o.month)("bColor","!bg-blue")("borderColor","blue")("width","w-full")("textColor","text-white")}}function Y(a,S){if(1&a&&(t.\u0275\u0275elementStart(0,"p",36),t.\u0275\u0275text(1," Pilih salah satu bulan yang ingin dimutasi"),t.\u0275\u0275element(2,"br"),t.\u0275\u0275elementStart(3,"span",21),t.\u0275\u0275text(4,"(Hanya dapat mengunduh 1 file dalam 1 hari)"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"div",37),t.\u0275\u0275template(6,at,2,5,"div",38),t.\u0275\u0275elementEnd()),2&a){const o=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(6),t.\u0275\u0275property("ngForOf",o.arrMonth)}}function rt(a,S){if(1&a){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"div",2),t.\u0275\u0275elementStart(2,"div",3)(3,"div",4)(4,"div",5)(5,"lib-date-range-input",6),t.\u0275\u0275listener("ngModelChange",function(s){t.\u0275\u0275restoreView(o);const _=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(_.dateRange=s)})("ngModelChange",function(s){t.\u0275\u0275restoreView(o);const _=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(_.setChangeDate(s))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"img",7),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.filterSort())}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"img",8),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.showDownloadReport=!s.showDownloadReport)}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(8,q,8,5,"div",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(9,tt,2,1,"div",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(10,et,1,2,"lib-basic-empty-state",11)(11,nt,1,2,"lib-basic-empty-state",12)(12,ot,4,0,"div",13),t.\u0275\u0275elementStart(13,"lib-bottom-modal",14),t.\u0275\u0275listener("closeOutsideModal",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.showDownloadReport=!s.showDownloadReport)}),t.\u0275\u0275template(14,it,4,0,"ng-template",null,15,t.\u0275\u0275templateRefExtractor)(16,gt,3,8,"ng-template",null,16,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"lib-bottom-modal",17),t.\u0275\u0275template(19,lt,4,0,"ng-template",null,15,t.\u0275\u0275templateRefExtractor)(21,Y,7,1,"ng-template",null,16,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()()}if(2&a){const o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275property("ngModel",o.dateRange)("minDate",o.minDate)("maxDate",o.maxDate),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",o.productAnalytics.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.loadMore&&o.listProductAnalytics.listProductAnalytics.data.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!o.loading&&o.isVerified&&!o.productAnalytics.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!o.loading&&!o.isVerified&&!o.productAnalytics.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("showModal",o.showDownloadReport),t.\u0275\u0275advance(5),t.\u0275\u0275property("showModal",o.isShowModal)}}const st=[{path:"",component:(()=>{class a{constructor(o,r,s,_,A,k,L,I){this.activatedRoute=o,this.router=r,this.transactionService=s,this.modalService=_,this.authData=A,this.http=k,this.deeplinkService=L,this.gaService=I,this.start="",this.loading=!1,this.loadingDownload=!1,this.filter="quantity",this.productAnalytics=[],this.page=1,this.startDate=y().format("YYYY-MM-DD"),this.endDate=y().format("YYYY-MM-DD"),this.minDate=y().subtract(1,"month").toDate(),this.maxDate=new Date,this.loadMore=!1,this.dateRange=[new Date,new Date],this.isShowModal=!1,this.showDownloadReport=!1,this.start=this.activatedRoute.snapshot?.queryParamMap.get("start")||""}ngOnInit(){this.start&&(this.startDate=this.start),this.getDetailProfile(),this.getListProductAnalytics()}getDetailProfile(){this.authData.user&&(this.isVerified=this.authData.user.merchant.accountType===p.tO8.premium)}setChangeDate(o){o[0]&&o[1]&&(this.page=1,this.productAnalytics=[],this.startDate=y(o[0]).format("YYYY-MM-DD"),this.endDate=y(o[1]).format("YYYY-MM-DD"),this.getListProductAnalytics())}handleLoadMoreDate(){this.loading=!1,this.page=this.page+1,this.getListProductAnalytics()}getListProductAnalytics(){this.loading=!0,this.loadMore=!0,this.transactionService.listProductAnalytics({listProductAnalyticsInput:{page:this.page,perPage:10,orderBy:"quantity"===this.filter?p.KpW.QUANTITY:p.KpW.PRICE,startDate:this.startDate,endDate:this.endDate,merchantId:""}}).subscribe({next:({data:r})=>{this.loading=!1,this.listProductAnalytics=r,r.listProductAnalytics.data.forEach(s=>{this.productAnalytics.push(s)}),this.page===r.listProductAnalytics.totalPage&&(this.loadMore=!1)},error:()=>{this.loading=!1}})}downloadByDateModal(){this.isShowModal=!1,this.modalService.open(P.T,{title:"Download",closeButton:!0}).onResult().subscribe(r=>{switch(r){case"csv":this.downloadProductAnalysisByDate("csv");break;case"excel":this.downloadProductAnalysisByDate("excel")}})}downloadProductAnalysisByDate(o){const r=b.environment.POS_API_URL+"/product-analytics/generate-report";this.loadingDownload=!0;let s=new h.HttpParams;s=s.set("startDate",this.startDate),s=s.set("endDate",this.endDate),s=s.set("fileType",o),s=s.set("orderBy","quantity"===this.filter?"quantity":"price");const _=new h.HttpHeaders({Authorization:`Bearer ${this.authData.token}`});this.http.get(r,{headers:_,params:s,responseType:"blob"}).subscribe(A=>{const k=new Blob([A],{type:A.type}),L=window.URL.createObjectURL(k),I=document.createElement("a");I.href=L,I.download=`Laporan Analisis Produk ${this.startDate} - ${this.endDate}`,document.body.appendChild(I),I.click(),document.body.removeChild(I),this.showDownloadReport=!1})}downloadFileProductAnalysis(o,r){const s=b.environment.POS_API_URL+"/product-analytics/generate-report";this.loadingDownload=!0;let _=new h.HttpParams;r&&(_=_.set("yyyymm",r.year+r.stringMonth)),o&&(_=_.set("fileType",o));const A=new h.HttpHeaders({Authorization:`Bearer ${this.authData.token}`});this.http.get(s,{headers:A,params:_,responseType:"blob"}).subscribe(k=>{const L=new Blob([k],{type:k.type}),I=window.URL.createObjectURL(L),F=document.createElement("a");F.href=I,F.download=`Laporan Analisis Produk bulan ${r.month} ${r.year}`,document.body.appendChild(F),F.click(),document.body.removeChild(F)})}goToPOS(){this.gaService.addEvent("buka_pos_product_analysis","buka_pos",""),this.deeplinkService.toAppPos()}verifyAccount(){this.router.navigate(["/register/login-kyc"])}downloadModal(o){this.isShowModal=!1,this.modalService.open(P.T,{title:"Download",closeButton:!0}).onResult().subscribe(s=>{switch(s){case"csv":this.downloadFileProductAnalysis("csv",o);break;case"excel":this.downloadFileProductAnalysis("excel",o)}})}filterSort(){this.modalService.open(O,{title:"Filter",closeButton:!0,data:{filter:this.filter}}).onResult().subscribe(r=>{this.page=1,this.filter=r,this.productAnalytics=[],this.getListProductAnalytics()},r=>r)}getTransactionUpdatedAt(){this.transactionService.transactionUpdatedAt().subscribe({next:({data:o})=>{o.transactionUpdatedAt.date&&(this.latestTransactionDate=o.transactionUpdatedAt.date)},error:()=>{}})}showMonthModal(){const o=[];for(let r=1;r<=3;r++)o.push({month:y().subtract(r,"month").format("MMMM"),indexMonth:y().subtract(r,"month").toDate().getMonth(),stringMonth:y().subtract(r,"month").format("MM"),year:y().subtract(r,"month").format("YYYY")});this.arrMonth=o,this.showDownloadReport=!this.showDownloadReport,this.isShowModal=!0}static#t=this.\u0275fac=function(r){return new(r||a)(t.\u0275\u0275directiveInject(f.ActivatedRoute),t.\u0275\u0275directiveInject(f.Router),t.\u0275\u0275directiveInject(p.pXi),t.\u0275\u0275directiveInject(B.Z),t.\u0275\u0275directiveInject(R.x),t.\u0275\u0275directiveInject(h.HttpClient),t.\u0275\u0275directiveInject(x._),t.\u0275\u0275directiveInject(D.O))};static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["product-analysis"]],decls:2,vars:1,consts:[["id","list-product-analysis",1,"flex","flex-col","my-[3%]","overflow-y-scroll","scrollbar-hide","h-full","bg-neutral-grey-6"],[4,"ngIf"],[1,"spacer","h-[14px]","bg-neutral-grey-6"],[1,"bg-white"],[1,"flex","flex-col","p-[16px]","gap-y-3"],[1,"flex","flex-row","gap-x-4"],["placeholder","Pilih tanggal laporan",1,"w-full",3,"ngModel","minDate","maxDate","ngModelChange"],["src","./assets/images/png/button-filter-2.png","alt","filter-button","width","43px",1,"cursor-pointer","!h-[43px]",3,"click"],["src","./assets/images/png/button-download.png","alt","download-button","width","43px",1,"cursor-pointer","!h-[43px]",3,"click"],["class","flex flex-col gap-y-4",4,"ngIf"],["class","flex flex-col px-[16px]",4,"ngIf"],["image","./assets/images/png/empty-transaction-subscription.png","label","Wah.. tidak ada transaksi ditanggal ini, yuks pilih tanggal yang lain..","description","Ayo, Lakukan transaksi sekarang dari Youtap POS!",3,"showButton","buttonLabel","clickButton",4,"ngIf"],["image","./assets/images/png/sending-otp.png","label","Kamu belum melakukan verifikasi!","description","Lakukan verifikasi dan buat transaksi melalui Youtap POS sekarang.",3,"showButton","buttonLabel","clickButton",4,"ngIf"],["class","flex flex-col p-[16px] gap-y-3 bg-white",4,"ngIf"],[3,"showModal","closeOutsideModal"],["headerTemplate",""],["bodyTemplate",""],[3,"showModal"],[1,"flex","flex-col","gap-y-4"],[1,"text-[10px]"],[1,"text-grey-4"],[1,"text-grey-3"],["class","flex flex-col",4,"ngFor","ngForOf"],[1,"flex","flex-col"],[3,"index","productImage","productName","productType","productPrice","productSell","totalRevenue"],[1,"flex","flex-col","px-[16px]"],[3,"title","width","handleEmit",4,"ngIf"],[3,"title","width","handleEmit"],["image","./assets/images/png/empty-transaction-subscription.png","label","Wah.. tidak ada transaksi ditanggal ini, yuks pilih tanggal yang lain..","description","Ayo, Lakukan transaksi sekarang dari Youtap POS!",3,"showButton","buttonLabel","clickButton"],["image","./assets/images/png/sending-otp.png","label","Kamu belum melakukan verifikasi!","description","Lakukan verifikasi dan buat transaksi melalui Youtap POS sekarang.",3,"showButton","buttonLabel","clickButton"],[1,"flex","flex-col","p-[16px]","gap-y-3","bg-white"],["width","100%","height","7rem"],[1,"flex","flex-row","justify-between","items-center","z-10","relative","h-[5vh]"],[1,"pi","pi-times",3,"click"],[1,"flex","flex-col","gap-y-2","mt-3","max-h-[50vh]","overflow-y-scroll","scrollbar-hide"],[3,"title","borderColor","width","textColor","handleEmit"],[1,"text-[14px]","text-primary-yt-dark-blue","bg-blue-"],[1,"flex","flex-col","gap-y-2","mt-3"],[4,"ngFor","ngForOf"],[3,"title","bColor","borderColor","width","textColor","handleEmit"]],template:function(r,s){1&r&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,rt,23,10,"div",1),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",s.listProductAnalytics))},dependencies:[g.NgForOf,g.NgIf,Q.V,M.n,N.S,z.n,G.S,K.O,U.NgControlStatus,U.NgModel,$.i],encapsulation:2})}return a})(),title:"Analisis-Produk",data:{pageTitle:"Analisis Produk"}}];let ct=(()=>{class a{static#t=this.\u0275fac=function(r){return new(r||a)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:a});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[f.RouterModule.forChild(st),f.RouterModule]})}return a})();var dt=l(7374);let ut=(()=>{class a{static#t=this.\u0275fac=function(r){return new(r||a)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:a});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[g.CommonModule,p.dTQ,p.hJ1,U.FormsModule,p.$QN,p.FFv,dt.Rq,p.Pl,K.m,p.PPX,p.gPf,p.drE,p.zkK]})}return a})();var pt=l(3985),ft=l(1685),j=l(2168);let J=(()=>{class a{static#t=this.\u0275fac=function(r){return new(r||a)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:a});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({providers:[ft._M,h.HttpClient,p.pXi,{provide:"BASE_URL_BOS_API",useClass:j.G,useValue:b.environment.BOS_API_URL}],imports:[g.CommonModule,ct,p.dTQ,ut,p.hJ1,p.PPX,p.gPf,p.zkK,p.drE,K.m,U.FormsModule,h.HttpClientModule,pt.p]})}return a})()},6457:(W,T,l)=>{l.d(T,{T:()=>b});var g=l(5347),f=l(7460),y=l(9275);let b=(()=>{class h extends g.u{constructor(){super(...arguments),this.showModal=!1}onInjectInputs(C){this.title=C.title,this.showModal=C.closeButton}select(C){this.close(C)}cancel(){this.dismiss({})}static#t=this.\u0275fac=(()=>{let C;return function(M){return(C||(C=f.\u0275\u0275getInheritedFactory(h)))(M||h)}})();static#e=this.\u0275cmp=f.\u0275\u0275defineComponent({type:h,selectors:[["download-modal-analysis"]],features:[f.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[1,"flex","flex-col","gap-y-4","mt-4"],[3,"title","width","handleEmit"]],template:function(t,M){1&t&&(f.\u0275\u0275elementStart(0,"div",0)(1,"lib-basic-button",1),f.\u0275\u0275listener("handleEmit",function(){return M.select("excel")}),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(2,"lib-basic-button",1),f.\u0275\u0275listener("handleEmit",function(){return M.select("csv")}),f.\u0275\u0275elementEnd()()),2&t&&(f.\u0275\u0275advance(1),f.\u0275\u0275property("title","Excel File")("width","w-full"),f.\u0275\u0275advance(1),f.\u0275\u0275property("title","CSV File")("width","w-full"))},dependencies:[y.n],encapsulation:2})}return h})()},2096:(W,T,l)=>{l.d(T,{of:()=>p});var g=l(9940),f=l(9666);function p(...y){const b=(0,g.yG)(y);return(0,f.D)(y,b)}},9397:(W,T,l)=>{l.d(T,{b:()=>b});var g=l(4674),f=l(9360),p=l(8251),y=l(2737);function b(h,P,C){const t=(0,g.m)(h)||P||C?{next:h,error:P,complete:C}:h;return t?(0,f.e)((M,O)=>{var R;null===(R=t.subscribe)||void 0===R||R.call(t);let B=!0;M.subscribe((0,p.x)(O,x=>{var D;null===(D=t.next)||void 0===D||D.call(t,x),O.next(x)},()=>{var x;B=!1,null===(x=t.complete)||void 0===x||x.call(t),O.complete()},x=>{var D;B=!1,null===(D=t.error)||void 0===D||D.call(t,x),O.error(x)},()=>{var x,D;B&&(null===(x=t.unsubscribe)||void 0===x||x.call(t)),null===(D=t.finalize)||void 0===D||D.call(t)}))}):y.y}},7400:(W,T,l)=>{l.d(T,{Z:()=>y});var g=l(7398);const{isArray:f}=Array;function y(b){return(0,g.U)(h=>function p(b,h){return f(h)?b(...h):b(h)}(b,h))}},7374:(W,T,l)=>{l.d(T,{Ry:()=>Et,Rq:()=>Tt});var g=l(7460),f=l(2096),p=l(4829),y=l(5592),b=l(1631),h=l(4266),P=l(4674),C=l(7400);const t=["addListener","removeListener"],M=["addEventListener","removeEventListener"],O=["on","off"];function R(e,n,i,c){if((0,P.m)(i)&&(c=i,i=void 0),c)return R(e,n,i).pipe((0,C.Z)(c));const[d,u]=function Q(e){return(0,P.m)(e.addEventListener)&&(0,P.m)(e.removeEventListener)}(e)?M.map(m=>w=>e[m](n,w,i)):function x(e){return(0,P.m)(e.addListener)&&(0,P.m)(e.removeListener)}(e)?t.map(B(e,n)):function D(e){return(0,P.m)(e.on)&&(0,P.m)(e.off)}(e)?O.map(B(e,n)):[];if(!d&&(0,h.z)(e))return(0,b.z)(m=>R(m,n,i))((0,p.Xf)(e));if(!d)throw new TypeError("Invalid event target");return new y.y(m=>{const w=(...v)=>m.next(1<v.length?v:v[0]);return d(w),()=>u(w)})}function B(e,n){return i=>c=>e[i](n,c)}var N=l(7398),z=l(9397),G=l(2181),K=l(1954);const $=new(l(9931).v)(K.o),Z=$;var q=l(9360),X=l(8251),et=l(671);function it(e,n=$,i){const c=function ot(e=0,n,i=Z){let c=-1;return null!=n&&((0,et.K)(n)?i=n:c=n),new y.y(d=>{let u=function nt(e){return e instanceof Date&&!isNaN(e)}(e)?+e-i.now():e;u<0&&(u=0);let m=0;return i.schedule(function(){d.closed||(d.next(m++),0<=c?this.schedule(void 0,c):d.complete())},u)})}(e,n);return function tt(e,n){return(0,q.e)((i,c)=>{const{leading:d=!0,trailing:u=!1}=n??{};let m=!1,w=null,v=null,E=!1;const V=()=>{v?.unsubscribe(),v=null,u&&(_t(),E&&c.complete())},ht=()=>{v=null,E&&c.complete()},vt=H=>v=(0,p.Xf)(e(H)).subscribe((0,X.x)(c,V,ht)),_t=()=>{if(m){m=!1;const H=w;w=null,c.next(H),!E&&vt(H)}};i.subscribe((0,X.x)(c,H=>{m=!0,w=H,(!v||v.closed)&&(d?_t():vt(H))},()=>{E=!0,(!(u&&m&&v)||v.closed)&&c.complete()}))})}(()=>c,i)}function lt(e,n,i,c){const d=window&&!!window.document&&window.document.documentElement;let u=d&&n?window:i;if(e&&(u=e&&d&&"string"==typeof e?function at(e,n,i){return(i?window.document:n).querySelector(e)}(e,i.nativeElement,c):e,!u))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return u}function Y(e){return e&&!e.firstChange}const yt={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},st={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class ct{constructor(n=!0){this.vertical=n,this.propsMap=n?yt:st}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function ft(e){return["Window","global"].some(i=>Object.prototype.toString.call(e).includes(i))}function j(e,n){return e?n.document.documentElement:null}function J(e,n){const i=function r({container:e,isWindow:n,axis:i}){const{offsetHeightKey:c,clientHeightKey:d}=o(i);return s(e,n,c,d)}(n);return n.isWindow?function a(e,n,i){const{axis:c,container:d,isWindow:u}=i,{offsetHeightKey:m,clientHeightKey:w}=o(c),v=e+A(j(u,d),c,u),E=s(n.nativeElement,u,m,w),V=function _(e,n,i){const c=n.topKey();if(e.getBoundingClientRect)return e.getBoundingClientRect()[c]+A(e,n,i)}(n.nativeElement,c,u)+E;return{height:e,scrolled:v,totalToScroll:V,isWindow:u}}(i,e,n):function S(e,n,i){const{axis:c,container:d}=i;return{height:e,scrolled:d[c.scrollTopKey()],totalToScroll:d[c.scrollHeightKey()],isWindow:!1}}(i,0,n)}function o(e){return{offsetHeightKey:e.offsetHeightKey(),clientHeightKey:e.clientHeightKey()}}function s(e,n,i,c){if(isNaN(e[i])){const d=j(n,e);return d?d[c]:0}return e[i]}function A(e,n,i){const c=n.pageYOffsetKey(),d=n.scrollTopKey(),u=n.offsetTopKey();return isNaN(window.pageYOffset)?j(i,e)[d]:e.ownerDocument?e.ownerDocument.defaultView[c]:e[u]}function k(e,n={down:0,up:0},i){let c,d;if(e.totalToScroll<=0)return!1;const u=e.isWindow?e.scrolled:e.height+e.scrolled;return i?(c=(e.totalToScroll-u)/e.totalToScroll,d=(n?.down?n.down:0)/10):(c=e.scrolled/(e.scrolled+(e.totalToScroll-u)),d=(n?.up?n.up:0)/10),c<=d}class bt{constructor({totalToScroll:n}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=n}updateScrollPosition(n){return this.lastScrollPosition=n}updateTotalToScroll(n){this.lastTotalToScroll!==n&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=n)}updateScroll(n,i){this.updateScrollPosition(n),this.updateTotalToScroll(i)}updateTriggeredFlag(n,i){i?this.triggered.down=n:this.triggered.up=n}isTriggeredScroll(n,i){return i?this.triggered.down===n:this.triggered.up===n}}function xt(e){const{scrollContainer:n,scrollWindow:i,element:c,fromRoot:d}=e,u=function ut({windowElement:e,axis:n}){return function pt(e,n){const i=e.isWindow||n&&!n.nativeElement?n:n.nativeElement;return{...e,container:i}}({axis:n,isWindow:ft(e)},e)}({axis:new ct(!e.horizontal),windowElement:lt(n,i,c,d)}),m=new bt({totalToScroll:J(c,u)}),v={up:e.upDistance,down:e.downDistance};return function St(e){let n=R(e.container,"scroll");return e.throttle&&(n=n.pipe(it(e.throttle,void 0,{leading:!0,trailing:!0}))),n}({container:u.container,throttle:e.throttle}).pipe((0,b.z)(()=>(0,f.of)(J(c,u))),(0,N.U)(E=>function Ct(e,n,i){const{scrollDown:c,fire:d}=function I(e,n,i){const c=function L(e,n){return e<n.scrolled}(e,n);return{fire:k(n,i,c),scrollDown:c}}(e,n,i);return{scrollDown:c,fire:d,stats:n}}(m.lastScrollPosition,E,v)),(0,z.b)(({stats:E})=>m.updateScroll(E.scrolled,E.totalToScroll)),(0,G.h)(({fire:E,scrollDown:V,stats:{totalToScroll:ht}})=>function dt(e,n,i){return!!(e&&n||!i&&n)}(e.alwaysCallback,E,m.isTriggeredScroll(ht,V))),(0,z.b)(({scrollDown:E,stats:{totalToScroll:V}})=>{m.updateTriggeredFlag(V,E)}),(0,N.U)(Dt))}const mt={DOWN:"[NGX_ISE] DOWN",UP:"[NGX_ISE] UP"};function Dt(e){const{scrollDown:n,stats:{scrolled:i}}=e;return{type:n?mt.DOWN:mt.UP,payload:{currentScrollPosition:i}}}let Et=(()=>{class e{constructor(i,c){this.element=i,this.zone=c,this.scrolled=new g.EventEmitter,this.scrolledUp=new g.EventEmitter,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:i,infiniteScrollDisabled:c,infiniteScrollDistance:d}){const u=Y(i),m=Y(c),w=Y(d),v=!m&&!this.infiniteScrollDisabled||m&&!c.currentValue||w;(u||m||w)&&(this.destroyScroller(),v&&this.setup())}setup(){(function rt(){return typeof window<"u"})()&&this.zone.runOutsideAngular(()=>{this.disposeScroller=xt({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(i=>this.handleOnScroll(i))})}handleOnScroll({type:i,payload:c}){const d=i===mt.DOWN?this.scrolled:this.scrolledUp;(function Pt(e){return e.observed??e.observers.length>0})(d)&&this.zone.run(()=>d.emit(c))}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}return e.\u0275fac=function(i){return new(i||e)(g.\u0275\u0275directiveInject(g.ElementRef),g.\u0275\u0275directiveInject(g.NgZone))},e.\u0275dir=g.\u0275\u0275defineDirective({type:e,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[g.\u0275\u0275NgOnChangesFeature]}),e})(),Tt=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=g.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=g.\u0275\u0275defineInjector({}),e})()}}]);