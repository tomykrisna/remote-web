{"version":3,"file":"478.f9b52372e8d9e317.js","mappings":"qNAMO,IAAMA,EAAyB,MAAhC,MAAOA,EAAyBC,SAAAC,KAAA,mBAAAC,iBAAzBH,EAAyB,EAAAC,SAAAC,KAAA,UAAAE,EAAA,kCAAzBJ,EAAyBK,UAAA,wBAAAC,MAAA,EAAAC,KAAA,EAAAC,OAAA,6LAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,ICNtCE,2BAAA,UAAAA,CAAwD,WAEpDA,sBAAA,kBACFA,2EDGWZ,CAAyB,KEFtC,MAAMa,EAAiB,CACrB,CACEC,KAAM,GACNC,UCMsB,MAApB,MAAOC,EACXC,YAC+BC,EACrBC,EACAC,EACAC,EACAC,EACAC,EACAC,GAER,GAR6BtB,KAAAgB,aACrBhB,KAAAiB,iBACAjB,KAAAkB,eACAlB,KAAAmB,WACAnB,KAAAoB,SACApB,KAAAqB,YACArB,KAAAsB,yBAEJC,qBAAkBvB,KAAKgB,YAAa,CACtC,MAAMQ,EAAMxB,KAAKiB,eAAeQ,UAAUC,cAAcC,IAAI,QACtDC,EACJ5B,KAAKiB,eAAeQ,UAAUC,cAAcC,IAAI,YAE9CH,EACFxB,KAAK6B,UAAUL,EAAKI,GAEhBA,GACF5B,KAAK8B,SAASF,GAItB,CAEAC,UAAUL,EAAaO,GAMrB/B,KAAKkB,aAAac,6BALkC,CAClDC,0BAA2B,CACzBT,IAAKA,KAGmDU,UAAU,CACpEC,KAAMA,EAAGC,WACHA,IACFpC,KAAKmB,SAASkB,MAAQD,EAAKE,qBAAqBC,UAAUC,YAC1DxC,KAAKmB,SAASsB,YACZL,EAAKE,qBAAqBC,UAAUG,UACtC1C,KAAKqB,UAAUsB,SAAS,wBAAyB,QAAS,IAC1D3C,KAAK8B,SAASC,GAAG,EAGrBa,MAAOA,KACL5C,KAAK8B,SAASC,EAAG,GAGvB,CAEAD,SAASC,GACHA,EACF/B,KAAKsB,oBAAoBuB,QAAQd,GAEjC/B,KAAKoB,OAAO0B,SAAS,CAAC,QAAS,CAAEC,YAAY,GAEjD,CAAChD,SAAAC,KAAA,mBAAAC,iBArDUa,GAAaJ,8BAEdsC,eAAWtC,8BAAAuC,kBAAAvC,8BAAAwC,OAAAxC,8BAAAyC,YAAAzC,8BAAAuC,UAAAvC,8BAAA0C,KAAA1C,8BAAA2C,KAAA,EAAAtD,SAAAC,KAAA,UAAAE,EAAA,kCAFVY,EAAaX,UAAA,WAAAC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAD,ICb1BE,2BAAA,uBAAmBA,mBAAA,aAAOA,uEDabI,CAAa,ODEnB,IAAMwC,EAAiB,MAAxB,MAAOA,EAAiBvD,SAAAC,KAAA,mBAAAC,iBAAjBqD,EAAiB,EAAAvD,SAAAC,KAAA,UAAAE,EAAA,iCAAjBoD,IAAiBvD,SAAAC,KAAA,UAAAE,EAAA,qCAHlBqD,eAAaC,SAAS7C,GACtB4C,yBAECD,CAAiB,oBGJvB,IAAMG,EAAU,MAAjB,MAAOA,EAAU1D,SAAAC,KAAA,mBAAAC,iBAAVwD,EAAU,EAAA1D,SAAAC,KAAA,UAAAE,EAAA,iCAAVuD,IAAU1D,SAAAC,KAAA,UAAAE,EAAA,qCAFXwD,eAAcJ,EAAmBK,cAEhCF,CAAU","names":["LoadingContainerComponent","static","this","t","core_mjs_","selectors","decls","vars","consts","template","rf","ctx","i0","routes","path","component","AuthComponent","constructor","platformId","activatedRoute","loginService","authData","router","gaService","windowActionService","isPlatformBrowser","key","snapshot","queryParamMap","get","stateUrl","autoLogin","gotoPage","url","validateAutoLoginKeyMutation","validateAutoLoginKeyInput","subscribe","next","data","token","validateAutoLoginKey","authToken","accessToken","expiredDate","expiredAt","addEvent","error","replace","navigate","replaceUrl","PLATFORM_ID","i1","i2","i3","i4","i5","AuthRoutingModule","RouterModule","forChild","AuthModule","CommonModule","ContainerModule"],"sourceRoot":"webpack:///","sources":["./apps/youtap-bos/src/app/shared/layout/container/loading-container/loading-container.component.ts","./apps/youtap-bos/src/app/shared/layout/container/loading-container/loading-container.component.html","./apps/youtap-bos/src/app/main/auth/auth-routing.module.ts","./apps/youtap-bos/src/app/main/auth/auth.component.ts","./apps/youtap-bos/src/app/main/auth/auth.component.html","./apps/youtap-bos/src/app/main/auth/auth.module.ts"],"sourcesContent":["import { Component } from '@angular/core';\n\n@Component({\n  selector: 'loading-container',\n  templateUrl: './loading-container.component.html'\n})\nexport class LoadingContainerComponent {}\n","<div class=\"w-full h-full flex flex-row justify-center\">\n  <div class=\"app-content max-w-[500px] w-full h-screen relative shadow-lg\">\n    <p-skeleton height=\"100%\" width=\"100%\" styleClass=\"mr-2\"></p-skeleton>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport {AuthComponent} from \"./auth.component\";\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AuthComponent\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AuthRoutingModule { }\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Component, Inject, PLATFORM_ID } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { LoginService, RequestValidateAutoLoginKeyDto } from '@youtap-web-lib';\nimport { AuthData } from '../../shared/data/auth.data';\nimport { GaService } from '../../shared/service/ga.service';\nimport { WindowActionService } from '../../shared/service/window-action.service';\nimport { isPlatformBrowser } from '@angular/common';\n\n@Component({\n  selector: 'auth',\n  templateUrl: './auth.component.html'\n})\nexport class AuthComponent {\n  constructor(\n    @Inject(PLATFORM_ID) private platformId: object,\n    private activatedRoute: ActivatedRoute,\n    private loginService: LoginService,\n    private authData: AuthData,\n    private router: Router,\n    private gaService: GaService,\n    private windowActionService: WindowActionService\n  ) {\n    if (isPlatformBrowser(this.platformId)) {\n      const key = this.activatedRoute.snapshot?.queryParamMap.get('alpb');\n      const stateUrl =\n        this.activatedRoute.snapshot?.queryParamMap.get('stateUrl');\n\n      if (key) {\n        this.autoLogin(key, stateUrl);\n      } else {\n        if (stateUrl) {\n          this.gotoPage(stateUrl);\n        }\n      }\n    }\n  }\n\n  autoLogin(key: string, url?: string | null) {\n    const validateKey: RequestValidateAutoLoginKeyDto = {\n      validateAutoLoginKeyInput: {\n        key: key\n      }\n    };\n    this.loginService.validateAutoLoginKeyMutation(validateKey).subscribe({\n      next: ({ data }: any) => {\n        if (data) {\n          this.authData.token = data.validateAutoLoginKey.authToken.accessToken;\n          this.authData.expiredDate =\n            data.validateAutoLoginKey.authToken.expiredAt;\n          this.gaService.addEvent('Auto Login POS to BOS', 'login', '');\n          this.gotoPage(url);\n        }\n      },\n      error: () => {\n        this.gotoPage(url)\n      }\n    });\n  }\n\n  gotoPage(url?: string | null) {\n    if (url) {\n      this.windowActionService.replace(url);\n    } else {\n      this.router.navigate(['home'], { replaceUrl: true });\n    }\n  }\n}\n","<loading-container>loading</loading-container>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { AuthRoutingModule } from './auth-routing.module';\nimport { AuthComponent } from './auth.component';\nimport {ContainerModule} from \"../../shared/layout/container/container.module\";\n\n@NgModule({\n  declarations: [AuthComponent],\n  imports: [CommonModule, AuthRoutingModule, ContainerModule]\n})\nexport class AuthModule {}\n"],"x_google_ignoreList":[]}