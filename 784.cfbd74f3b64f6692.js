(self.webpackChunkyoutapBos=self.webpackChunkyoutapBos||[]).push([[784],{18027:(b,_,o)=>{o.d(_,{Z:()=>C});var m=o(26805),a=o(17460),l=o(9275);let C=(()=>{class g extends m.u{constructor(){super(...arguments),this.showButton=!1,this.filter="lowerPrice"}onInjectInputs(c){this.title=c.title,this.showButton=c.closeButton,this.filter=c.data.filter}select(c){this.close(c)}cancel(){this.dismiss({data:"1234"})}static#t=this.\u0275fac=(()=>{let c;return function(p){return(c||(c=a.\u0275\u0275getInheritedFactory(g)))(p||g)}})();static#e=this.\u0275cmp=a.\u0275\u0275defineComponent({type:g,selectors:[["price-sort-modal"]],features:[a.\u0275\u0275InheritDefinitionFeature],decls:3,vars:10,consts:[[1,"flex","flex-col","gap-y-2","mt-3"],[3,"outlined","title","borderColor","width","textColor","handleEmit"]],template:function(f,p){1&f&&(a.\u0275\u0275elementStart(0,"div",0)(1,"lib-basic-button",1),a.\u0275\u0275listener("handleEmit",function(){return p.select("lowerPrice")}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(2,"lib-basic-button",1),a.\u0275\u0275listener("handleEmit",function(){return p.select("upperPrice")}),a.\u0275\u0275elementEnd()()),2&f&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("outlined","lowerPrice"!==p.filter)("title","Termurah")("borderColor","blue")("width","w-full")("textColor","lowerPrice"===p.filter?"text-white":"text-primary-yt-blue"),a.\u0275\u0275advance(1),a.\u0275\u0275property("outlined","upperPrice"!==p.filter)("title","Termahal")("borderColor","blue")("width","w-full")("textColor","lowerPrice"===p.filter?"text-primary-yt-blue":"text-white"))},dependencies:[l.n],encapsulation:2})}return g})()},38784:(b,_,o)=>{o.r(_),o.d(_,{SearchModule:()=>N});var m=o(54887),a=o(44398),P=o(50246),l=o(60654),C=o(12497),g=o(18027),t=o(17460),c=o(9275),f=o(56281),p=o(80845),y=o(71093),S=o(56890);function w(r,d){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-basic-button",7),t.\u0275\u0275listener("handleEmit",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.priceSort())}),t.\u0275\u0275elementEnd()}if(2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("outlined",!0)("title","lowerPrice"===e.filterPriceSort?"Termurah":"Termahal")("borderColor","blue")("padding","!p-1")("icon","arrow-down")("iconPosition","right")("iconSize","w-5")("textColor","text-primary-yt-blue")}}function E(r,d){1&r&&t.\u0275\u0275element(0,"lib-basic-empty-state",8)}function I(r,d){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-basic-product-card",11),t.\u0275\u0275listener("clickProduct",function(){const s=t.\u0275\u0275restoreView(e).$implicit,u=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(u.getProductDetail(s.slug,s.productVariants[0].slug,s.warehouse.id))}),t.\u0275\u0275elementEnd()}if(2&r){const e=d.$implicit;t.\u0275\u0275property("image",e.image)("productName",e.name)("productVariantName",e.productVariants[0].name)("price",e.productVariants[0].price)("priceBeforeDiscount",e.productVariants[0].price+e.productVariants[0].discountAmount)("unit",e.productVariants[0].unitType)("discountValue",e.productVariants[0].discountAmount)("stock",e.productVariants[0].stock)("maxLength",e.productVariants[0].maxQuantity)("isPOD",e.isPODAvailable)}}function M(r,d){if(1&r&&(t.\u0275\u0275elementStart(0,"div",9),t.\u0275\u0275template(1,I,1,10,"lib-basic-product-card",10),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.products)}}function L(r,d){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",17),t.\u0275\u0275listener("click",function(){const s=t.\u0275\u0275restoreView(e).$implicit,u=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(u.handleClickCategoryMenu(s.slug))}),t.\u0275\u0275element(1,"img",18),t.\u0275\u0275elementStart(2,"span",19),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()}if(2&r){const e=d.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("src",e.image,t.\u0275\u0275sanitizeUrl)("alt",e.name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.name)}}function T(r,d){if(1&r&&(t.\u0275\u0275elementStart(0,"div",15),t.\u0275\u0275template(1,L,4,3,"div",16),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",null==e.listCategory.listCategoryParent?null:e.listCategory.listCategoryParent.categories)}}function V(r,d){if(1&r&&(t.\u0275\u0275elementStart(0,"div",12)(1,"h1",13),t.\u0275\u0275text(2,"Kategori yang ada di Belanja STOK"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,T,2,1,"div",14),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",!e.loadingListCategory)}}let j=(()=>{class r{constructor(e,n,i,s,u,v){this.route=e,this.modalService=n,this.productVariantService=i,this.productService=s,this.categoryService=u,this.router=v,this.search="",this.filterPriceSort="lowerPrice",this.loading=!1,this.page=1,this.products=[],this.loadingListCategory=!1,this.hasMore=!0}ngOnInit(){this.search=this.route.snapshot?.queryParamMap.get("search")??"",this.getListProduct(),this.getListCategoryParent()}getListProduct(){this.loading=!0,this.productService.listProduct({listProductInput:{page:this.page,limit:25,search:{keyword:this.search},order:{orderBy:l.Wmb.PRICE,sortBy:"lowerPrice"===this.filterPriceSort?l.rp5.ASC:l.rp5.DESC},mutator:{imageResolution:l.Boi.M}},warehouseId:""}).subscribe({next:({data:n})=>{this.loading=!1,this.listProduct=n,n.listProduct.products.forEach(i=>{const s=i.productVariants.filter(v=>v.stock>0);this.products.push({actualPriceMax:i.actualPriceMax,actualPriceMin:i.actualPriceMin,description:i.description,id:i.id,image:i.image,isActive:i.isActive,isPODAvailable:i.isPODAvailable,name:i.name,activeDiscount:i.activeDiscount,productVariants:s.length?s:i.productVariants,slug:i.slug,supplier:i.supplier,warehouse:i.warehouse,categoryProducts:i.categoryProducts,isAvailable:i.isAvailable})}),n.listProduct.products.length||(this.hasMore=!1)},error:()=>{this.loading=!1}})}getListCategoryParent(){this.loadingListCategory=!0,this.categoryService.listCategoryParent({listCategoryInput:{limit:20,page:1}}).subscribe({next:({data:n})=>{this.listCategory=n,this.loadingListCategory=!1},error:()=>{this.loadingListCategory=!1}})}onScrollDown(){this.page<this.listProduct.listProduct.totalPage&&this.getListProduct()}priceSort(){this.modalService.open(g.Z,{title:"Urutkan",closeButton:!0,data:{filter:this.filterPriceSort}}).onResult().subscribe(n=>{this.page=1,this.products=[],this.filterPriceSort=n,this.getListProduct()},n=>{})}getProductDetail(e,n,i){this.router.navigate([`product/detail/${e}`],{queryParams:{variantSlugDetail:n,warehouseId:i}})}handleClickCategoryMenu(e){this.router.navigate(["product/product-category"],{queryParams:{s:e}})}onScroll(){this.hasMore&&(this.page=this.page+1,this.getListProduct())}static#t=this.\u0275fac=function(n){return new(n||r)(t.\u0275\u0275directiveInject(a.ActivatedRoute),t.\u0275\u0275directiveInject(C.Z),t.\u0275\u0275directiveInject(l.M52),t.\u0275\u0275directiveInject(l.M52),t.\u0275\u0275directiveInject(l.HEz),t.\u0275\u0275directiveInject(a.Router))};static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["list-product-search"]],decls:9,vars:8,consts:[["infiniteScroll","",1,"p-4","mt-[2%]",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],[1,"flex","flex-row","justify-between","items-center","mb-4"],[3,"outlined","title","borderColor","padding","icon","iconPosition","iconSize","textColor","handleEmit",4,"ngIf"],["image","./assets/images/png/product-empty.png","label","Ups... yang kamu cari ga ada..","description","Cari barang yang lain yuk..",4,"ngIf"],["class","grid grid-cols-2 gap-x-4 gap-y-6 justify-items-center",4,"ngIf"],[3,"isActive"],["class","px-[16px] mt-4",4,"ngIf"],[3,"outlined","title","borderColor","padding","icon","iconPosition","iconSize","textColor","handleEmit"],["image","./assets/images/png/product-empty.png","label","Ups... yang kamu cari ga ada..","description","Cari barang yang lain yuk.."],[1,"grid","grid-cols-2","gap-x-4","gap-y-6","justify-items-center"],[3,"image","productName","productVariantName","price","priceBeforeDiscount","unit","discountValue","stock","maxLength","isPOD","clickProduct",4,"ngFor","ngForOf"],[3,"image","productName","productVariantName","price","priceBeforeDiscount","unit","discountValue","stock","maxLength","isPOD","clickProduct"],[1,"px-[16px]","mt-4"],[1,"font-normal"],["class","mt-3",4,"ngIf"],[1,"mt-3"],["class","flex flex-row w-full items-center mb-3 cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"flex","flex-row","w-full","items-center","mb-3","cursor-pointer",3,"click"],["width","40px",1,"mr-3",3,"src","alt"],[1,"text-[14px]","font-normal"]],template:function(n,i){1&n&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275listener("scrolled",function(){return i.onScroll()}),t.\u0275\u0275elementStart(1,"div",1)(2,"h2"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,w,1,8,"lib-basic-button",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,E,1,0,"lib-basic-empty-state",3)(6,M,2,1,"div",4),t.\u0275\u0275element(7,"lib-line-loading",5),t.\u0275\u0275template(8,V,4,1,"div",6),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275property("infiniteScrollDistance",1)("infiniteScrollThrottle",300),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1('Hasil Pencarian "',i.search,'"'),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.products.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",0===i.products.length&&!i.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.products.length>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("isActive",i.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",0===i.products.length&&!i.loading))},dependencies:[m.NgForOf,m.NgIf,c.n,f.i,p.j,y.Ry,S.S],styles:[".p-scroller-content{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));justify-items:center}\n"],encapsulation:2})}return r})();var D=o(83918),x=o(42378),h=o(36033);function O(r,d){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",12),t.\u0275\u0275listener("click",function(){const s=t.\u0275\u0275restoreView(e).$implicit,u=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(u.handleClickCategoryMenu(s.slug))}),t.\u0275\u0275element(1,"img",13),t.\u0275\u0275elementStart(2,"span",14),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()}if(2&r){const e=d.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("src",e.image?e.image:"assets/images/png/aneka-minuman.png",t.\u0275\u0275sanitizeUrl)("alt",e.name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.name)}}function k(r,d){if(1&r&&(t.\u0275\u0275elementStart(0,"div",10),t.\u0275\u0275template(1,O,4,3,"div",11),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",null==e.listCategory.listCategoryParent?null:e.listCategory.listCategoryParent.categories)}}const B=()=>({standalone:!0}),F=[{path:"",component:(()=>{class r{constructor(e,n,i,s){this.location=e,this.router=n,this.categoryService=i,this.route=s,this.searchValue="",this.loadingListCategory=!1}ngOnInit(){this.getListCategoryParent(),this.searchValue=this.route.snapshot?.queryParamMap.get("search")??""}getListCategoryParent(){var e=this;return(0,D.Z)(function*(){e.loadingListCategory=!0;const n={listCategoryInput:{limit:20,page:e.listCategory?e.listCategory.listCategoryParent.page+1:1}};try{const{data:i}=yield e.categoryService.listCategoryParent(n).pipe().toPromise();e.listCategory?(e.listCategory.listCategoryParent.page=i.listCategoryParent.page,e.listCategory.listCategoryParent.categories=[...e.listCategory.listCategoryParent.categories,...i.listCategoryParent.categories],e.loadingListCategory=!1):(e.listCategory=i,e.loadingListCategory=!1),e.listCategory.listCategoryParent.page<e.listCategory.listCategoryParent.totalPage&&e.getListCategoryParent()}catch(i){}})()}goBack(){this.location.back()}search(){this.router.navigate(["/search/list-product"],{queryParams:{search:this.searchValue},replaceUrl:!0})}handleClickCategoryMenu(e){this.router.navigate(["product/product-category"],{queryParams:{s:e}})}static#t=this.\u0275fac=function(n){return new(n||r)(t.\u0275\u0275directiveInject(m.Location),t.\u0275\u0275directiveInject(a.Router),t.\u0275\u0275directiveInject(l.HEz),t.\u0275\u0275directiveInject(a.ActivatedRoute))};static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["search"]],decls:12,vars:4,consts:[[1,"flex","flex-row","bg-white","p-[16px]","sticky","w-full"],[1,"mt-2","mr-3","cursor-pointer",3,"click"],["src","./assets/images/svg/icon/back-header-basic.svg","alt","back"],[1,"w-full",3,"submit"],[1,"p-input-icon-left","!w-full"],["src","./assets/images/svg/icon/search.svg","alt","search"],["type","text","pInputText","","placeholder","belanja apa hari ini?",1,"!rounded-full","h-[36px]","px-[13px]","py-[8px]","!text-[14px]","!w-full","!shadow-none","focus:!border-neutral-grey-5",3,"ngModel","ngModelOptions","ngModelChange","keyup.enter"],[1,"px-[16px]","pb-[16px]","bg-white"],[1,"font-normal"],["class","mt-3",4,"ngIf"],[1,"mt-3"],["class","flex flex-row w-full items-center mb-3 cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"flex","flex-row","w-full","items-center","mb-3","cursor-pointer",3,"click"],["width","40px",1,"mr-3",3,"src","alt"],[1,"text-[14px]","font-normal"]],template:function(n,i){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1),t.\u0275\u0275listener("click",function(){return i.goBack()}),t.\u0275\u0275element(2,"img",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"form",3),t.\u0275\u0275listener("submit",function(){return i.search()}),t.\u0275\u0275elementStart(4,"span",4)(5,"i"),t.\u0275\u0275element(6,"img",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"input",6),t.\u0275\u0275listener("ngModelChange",function(u){return i.searchValue=u})("keyup.enter",function(){return i.search()}),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(8,"div",7)(9,"h1",8),t.\u0275\u0275text(10,"Kategori yang ada di Belanja STOK"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(11,k,2,1,"div",9),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(7),t.\u0275\u0275property("ngModel",i.searchValue)("ngModelOptions",t.\u0275\u0275pureFunction0(3,B)),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",!i.loadingListCategory))},dependencies:[m.NgForOf,m.NgIf,x.o,h.\u0275NgNoValidate,h.DefaultValueAccessor,h.NgControlStatus,h.NgControlStatusGroup,h.NgModel,h.NgForm],encapsulation:2})}return r})(),title:"Cari"},{path:"",component:P.q,data:{canGoBack:!0},children:[{path:"list-product",component:j,title:"cari"}]}];let A=(()=>{class r{static#t=this.\u0275fac=function(n){return new(n||r)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:r});static#i=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[a.RouterModule.forChild(F),a.RouterModule]})}return r})(),N=(()=>{class r{static#t=this.\u0275fac=function(n){return new(n||r)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:r});static#i=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[m.CommonModule,A,x.j,h.FormsModule,l.drE,l.hJ1,l.dTQ,l.Pl,y.Rq,l.PPX]})}return r})()}}]);
//# sourceMappingURL=784.cfbd74f3b64f6692.js.map